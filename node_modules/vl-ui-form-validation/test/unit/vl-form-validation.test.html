<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <script src="../../../@webcomponents/webcomponentsjs/webcomponents-lite.js"></script>
  <script src="../../../web-component-tester/browser.js"></script>
  
  <script src="../../node_modules/sinon/pkg/sinon.js"></script>
</head>

<body>
  <script type="module">
    import { VlFormValidation } from '../src/vl-form-validation.src.js';

    setup((done) => {
      window.vl = {
        formValidation: {
          dress: sinon.fake()
        }
      }

      Promise.all([
        VlFormValidation(Object).awaitUntilReady()
      ]).then(() => done());
    });

    suite('vl-form-validation', () => {
      const should = chai.should();
      class VlFormValidationImplementatie extends VlFormValidation(Object) { }

      test('een class die de form validatie mixin toepast heeft een dress functie om de form validatie te activeren', () => {
        const implementatie = new VlFormValidationImplementatie();
        assert.isDefined(implementatie.dress);
      });

      test('de dress functie zal de form validatie activeren', () => {
        const implementatie = new VlFormValidationImplementatie();
        const element = document.createElement('div');
        implementatie.dress(element);
        assert(window.vl.formValidation.dress.calledWith(element));
      });

      test('de dress functie zal de form validatie niet activeren indien het attribuut novalidation aanwezig is', () => {
        const implementatie = new VlFormValidationImplementatie();
        const element = document.createElement('div');
        element.setAttribute('novalidate', '');
        implementatie.dress(element);
        assert(window.vl.formValidation.dress.notCalled);
      });
    });
  </script>
</body>

</html>
