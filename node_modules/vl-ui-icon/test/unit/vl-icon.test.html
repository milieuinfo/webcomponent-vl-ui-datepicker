<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <script src="../../../@webcomponents/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../../web-component-tester/browser.js"></script>

    <script type="module" src="/node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
    <script type="module" src="../../src/vl-icon.src.js"></script>
</head>

<body>
    <test-fixture id="vl-icon-fixture">
        <template>
            <span is="vl-icon"></span>
        </template>
    </test-fixture>

    <test-fixture id="vl-icon-fixture-deg">
        <template>
            <span is="vl-icon" 90deg></span>
            <span is="vl-icon" 180deg></span>
        </template>
    </test-fixture>

    <test-fixture id="vl-icon-fixture-link">
        <template>
            <span is="vl-icon" icon="calendar" size="small" light before 90deg></span>
            <span is="vl-icon" icon="calendar" size="small" light before 90deg link></span>
        </template>
    </test-fixture>

    <script>
        suite('<vl-icon>', () => {
            const should = chai.should();

            test('heeft de vl-icon en vl-vi class', () => {
                const icon = fixture('vl-icon-fixture');
                assert.isTrue(icon.classList.contains('vl-icon'));
                assert.isTrue(icon.classList.contains('vl-vi'));
            });

            test('bevat het aria-hidden attribuut', () => {
                const icon = fixture('vl-icon-fixture');
                assert.isTrue(!!icon.getAttribute('aria-hidden'));
            });

            test('heeft de juiste icon class', () => {
                const icon = fixture('vl-icon-fixture');
                const iconName = "calendar";
                icon.setAttribute('icon', iconName);
                assert.isTrue(icon.classList.contains("vl-vi-" + iconName))
            });

            test('heeft de juiste size class', () => {
                const icon = fixture('vl-icon-fixture');
                ['small', 'large'].forEach((iconSize) => {
                    icon.setAttribute('size', iconSize);
                    assert.isTrue(icon.classList.contains("vl-icon--" + iconSize));
                });

                const iconSize = 'bla';
                icon.setAttribute('size', iconSize);
                assert.isFalse(icon.classList.contains("vl-icon--" + iconSize));
            });

            test('ondersteunt 90 en 180 graden rotatie', () => {
                const icon = fixture('vl-icon-fixture-deg');
                assert.isTrue(icon[0].classList.contains("vl-vi-u-90deg"));
                assert.isTrue(icon[1].classList.contains("vl-vi-u-180deg"));
            });

            test('krijgt de juiste class wanneer het icon een attribuut bevat', () => {
                const icon = fixture('vl-icon-fixture');
                ['before', 'after', 'light'].forEach((attribuut) => {
                    assert.isFalse(icon.classList.contains('vl-icon--' + attribuut));
                    icon.setAttribute(attribuut, '');
                    assert.isTrue(icon.classList.contains('vl-icon--' + attribuut));
                    icon.removeAttribute(attribuut);
                    assert.isFalse(icon.classList.contains('vl-icon--' + attribuut));
                });
            });

            test('met een link attribuut past de class attributen aan om de stjil te garanderen', (done) => {
                const icon = fixture('vl-icon-fixture-link');
                setTimeout(() => {
                    ['vl-icon', 'vl-icon--small', 'vl-icon--light', 'vl-icon--before'].forEach((value) => {
                        assert.isTrue(icon[0].classList.contains(value));
                        assert.isTrue(icon[1].classList.contains(value.replace('-icon', '-link__icon')));
                    });
                    done();
                });
            });
        });
    </script>
</body>

</html>
