{"version":3,"file":"util.js","sources":["../../src/js/util.js"],"sourcesContent":["window.vl = window.vl || {ns: 'vl-'};\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nconst debounce = (func, wait, immediate = false) => {\n  let timeout;\n\n  return function() {\n    let context = this,\n      args = arguments,\n      later,\n      callNow;\n\n    later = () => {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n\n    callNow = immediate && !timeout;\n    window.clearTimeout(timeout);\n    timeout = window.setTimeout(later, wait);\n\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n};\n\nconst throttle = (func, threshhold = 250, scope) => {\n  let last, deferTimer;\n\n  return function() {\n    let context = scope || this,\n      now = Number(new Date()),\n      args = arguments;\n\n    if (last && now < last + threshhold) {\n      // hold on to it\n      window.clearTimeout(deferTimer);\n      deferTimer = window.setTimeout(() => {\n        last = now;\n        func.apply(context, args);\n      }, threshhold);\n    } else {\n      last = now;\n      func.apply(context, args);\n    }\n  };\n};\n\nconst addClass = (el, classes) => {\n  el.classList.add(classes);\n};\n\nconst removeClass = (el, classes) => {\n  el.classList.remove(classes);\n};\n\nconst hasClass = (el, classes) => {\n  return el.classList.contains(classes);\n};\n\nconst toggleClass = (el, classes) => {\n  el.classList.toggle(classes);\n};\n\nconst addClassFor = (el, classes, duration) => {\n  addClass(el, classes);\n\n  window.setTimeout(() => {\n    removeClass(el, classes);\n  }, duration);\n};\n\n// Helper function that takes an HTML string & an object to use for\n// \"binding\" its properties to the HTML template above.\nconst parseTemplate = (str, data) => {\n  return str.replace(/\\$\\{(\\w+)\\}/gi, (match, parensMatch) => {\n    if (typeof data[parensMatch] !== 'undefined') {\n      return data[parensMatch];\n    }\n    return match;\n  });\n};\n\n// trigger a custom event on an object\nconst triggerEvent = (obj, evt) => {\n  let fireOnThis = obj,\n    evtObj;\n\n  if (document.createEvent) {\n    evtObj = document.createEvent('MouseEvents');\n\n    evtObj.initEvent(evt, true, false);\n    fireOnThis.dispatchEvent(evtObj);\n  } else if (document.createEventObject) {\n    evtObj = document.createEventObject();\n\n    fireOnThis.fireEvent(`on${evt}`, evtObj);\n  }\n};\n\nconst unique = array => {\n  return array.filter((elem, pos, arr) => {\n    return arr.indexOf(elem) === pos;\n  });\n};\n\nconst closest = (value, to) => {\n  return Math.round(value / to) * to;\n};\n\n// Current position of an element relative to the document.\nconst offset = el => {\n  let rect = el.getBoundingClientRect(),\n    doc = el.ownerDocument,\n    win = doc.defaultView || doc.parentWindow,\n    docElem = doc.documentElement,\n    xOff = win.pageXOffset;\n\n  // getBoundingClientRect contains left scroll in Chrome on Android.\n  // I haven't found a feature detection that proves this. Worst case\n  // scenario on mis-match: the 'tap' feature on horizontal sliders breaks.\n  if (/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)) {\n    xOff = 0;\n  }\n\n  return {\n    top: rect.top + win.pageYOffset - docElem.clientTop,\n    left: rect.left + xOff - docElem.clientLeft\n  };\n};\n\n// Insert after\nconst insertAfter = (newElement, targetElement) => {\n  let parent = targetElement.parentNode;\n\n  // If targetElement is the parents last-child\n  if (parent.lastchild === targetElement) {\n    // Add the newElement after the target element\n    parent.appendChild(newElement);\n  } else {\n    // Target has siblings, insert the new element between the target and its next sibling\n    parent.insertBefore(newElement, targetElement.nextSibling);\n  }\n};\n\nconst removeElement = targetElement => {\n  let parent = targetElement.parentNode;\n\n  parent.removeChild(targetElement);\n};\n\nconst isNumeric = number => {\n  return !isNaN(parseFloat(number)) && isFinite(number);\n};\n\nconst wrap = (el, wrapper) => {\n  // Cache the current parent and sibling\n  let parent = el.parentNode,\n    sibling = el.nextSibling;\n\n  wrapper.appendChild(el);\n\n  /**\n   * If the element had a sibling, insert the wrapper before\n   * the sibling to maintain the HTML structure; otherwise, just\n   * append it to the parent.\n   */\n  if (sibling) {\n    parent.insertBefore(wrapper, sibling);\n  } else {\n    parent.appendChild(wrapper);\n  }\n};\n\n// Strip tags from element\nconst stripTags = html => {\n  let tmp = document.createElement('div');\n\n  tmp.innerHTML = html;\n  return tmp.textContent || tmp.innerText;\n};\n\n// Create a unique ID\nconst uniqueId = () => {\n  // Desired length of Id\n  // Always start with a letter -- base 36 makes for a nice shortcut\n  let idStrLen = 32,\n    idStr = `${(Math.floor(Math.random() * 25) + 10).toString(36)}_`;\n\n  // Add a timestamp in milliseconds (base 36 again) as the base\n  idStr += `${new Date().getTime().toString(36)}_`;\n\n  // Similar to above, complete the Id using random, alphanumeric characters\n  do {\n    idStr += Math.floor(Math.random() * 35).toString(36);\n  } while (idStr.length < idStrLen);\n\n  return idStr;\n};\n\n// Create a unique name\nconst uniqueName = () => {\n  return Math.random()\n    .toString(36)\n    .substring(2, 5);\n};\n\n// Rounds a number to 7 supported decimals\nconst accurateNumber = number => {\n  let p = Math.pow(10, 7);\n\n  return Number((Math.round(number * p) / p).toFixed(7));\n};\n\n// Limits a value to 0 - 100\nconst limit = a => {\n  return Math.max(Math.min(a, 100), 0);\n};\n\n// Wraps a variable as an array, if it isn't one yet.\nconst asArray = a => {\n  return Array.isArray(a) ? a : [a];\n};\n\n// Count decimals\nconst countDecimals = numStr => {\n  let pieces = numStr.split('.');\n\n  return pieces.length > 0 ? pieces[1].length : 0;\n};\n\n// Scroll element to specific position\n// TODO: use element.scrollIntoView instead, maybe with fallback if you want old browser to have a smooth scroll\nconst scrollTo = (el, to, duration, callback = () => {}) => {\n  let scrollTop = el.scrollTop,\n    difference = to - scrollTop,\n    perTick;\n\n  if (duration < 0) {\n    return;\n  }\n\n  perTick = difference / duration * 10;\n\n  window.setTimeout(() => {\n    if (scrollTop === to || duration <= 0) {\n      callback();\n    } else {\n      el.scrollTop = scrollTop + perTick;\n      scrollTo(el, to, duration - 10, callback);\n    }\n  }, 10);\n};\n\n// Gets a random number between min and max\nconst randomIntFromInterval = (min, max) => {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n};\n\n// Much faster each loop than a forEach loop\nconst each = (arr, fn) => {\n  let l = arr.length,\n    i = 0;\n\n  for (; i < l; i++) {\n    fn(arr[i], i);\n  }\n};\n\n/**\n * Determines if a certain value exists, is not null, and not empty\n * @method exists\n * @param  {type}  value value to check\n * @param  {Boolean} [nullAllowed = false] optional parameter to allow null\n * @param  {Boolean} [emptyAllowed = false] optional paramet to allow empty values\n * @return {Boolean}\n */\nconst exists = (value, nullAllowed = false, emptyAllowed = false) => {\n  if (typeof value !== 'undefined') {\n    if (nullAllowed || value !== null) {\n      if (emptyAllowed || value !== '') {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\nconst bytesToSize = (bytes, addUnits = true, base = 1024) => {\n  let sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'],\n    value = null,\n    i;\n\n  if (bytes === 0) {\n    value = addUnits ? '0 bytes' : 0;\n  } else {\n    i = parseInt(Math.floor(Math.log(bytes) / Math.log(base)), 10);\n\n    if (!addUnits) {\n      value =  Math.round(bytes / Math.pow(base, i), 2);\n    }\n\n    value = addUnits ? Math.round(bytes / Math.pow(base, i), 2) + ' ' + sizes[i] : Math.round(bytes / Math.pow(base, i), 2);\n  }\n\n  return value;\n};\n\nconst getJson = (url, callback) => {\n  let xhr = new XMLHttpRequest();\n\n  xhr.open('get', url, true);\n  xhr.responseType = 'json';\n  xhr.onload = function() {\n    let status = xhr.status;\n\n    if (status === 200) {\n      callback(null, xhr.response);\n    } else {\n      callback(status);\n    }\n  };\n  xhr.send();\n};\n\n/**\n * Get all DOM element up the tree that contain a class, ID, or data attribute\n * @param  {Node} elem The base element\n * @param  {String} selector The class, id, data attribute, or tag to look for\n * @return {Array} Null if no match\n */\nconst getParents = (elem, selector) => {\n  let parents = [],\n    firstChar;\n\n  if (selector) {\n    firstChar = selector.charAt(0);\n  }\n\n  // Get matches\n  for (; elem && elem !== document; elem = elem.parentNode) {\n    if (selector) {\n      // If selector is a class\n      if (firstChar === '.') {\n        if (elem.classList.contains(selector.substr(1))) {\n          parents.push(elem);\n        }\n      }\n\n      // If selector is an ID\n      if (firstChar === '#') {\n        if (elem.id === selector.substr(1)) {\n          parents.push(elem);\n        }\n      }\n\n      // If selector is a data attribute\n      if (firstChar === '[') {\n        if (elem.hasAttribute(selector.substr(1, selector.length - 1))) {\n          parents.push(elem);\n        }\n      }\n\n      // If selector is a tag\n      if (elem.tagName.toLowerCase() === selector) {\n        parents.push(elem);\n      }\n    } else {\n      parents.push(elem);\n    }\n  }\n\n  // Return parents if any exist\n  if (parents.length === 0) {\n    return null;\n  }\n  return parents;\n};\n\nconst getParentsUntil = (elem, parent, selector) => {\n  let parents = [],\n    parentType,\n    selectorType;\n\n  if (parent) {\n    parentType = parent.charAt(0);\n  }\n  if (selector) {\n    selectorType = selector.charAt(0);\n  }\n\n  // Get matches\n  for (; elem && elem !== document; elem = elem.parentNode) {\n    // Check if parent has been reached\n    if (parent) {\n      // If parent is a class\n      if (parentType === '.') {\n        if (elem.classList.contains(parent.substr(1))) {\n          break;\n        }\n      }\n\n      // If parent is an ID\n      if (parentType === '#') {\n        if (elem.id === parent.substr(1)) {\n          break;\n        }\n      }\n\n      // If parent is a data attribute\n      if (parentType === '[') {\n        if (elem.hasAttribute(parent.substr(1, parent.length - 1))) {\n          break;\n        }\n      }\n\n      // If parent is a tag\n      if (elem.tagName.toLowerCase() === parent) {\n        break;\n      }\n    }\n\n    if (selector) {\n      // If selector is a class\n      if (selectorType === '.') {\n        if (elem.classList.contains(selector.substr(1))) {\n          parents.push(elem);\n        }\n      }\n\n      // If selector is an ID\n      if (selectorType === '#') {\n        if (elem.id === selector.substr(1)) {\n          parents.push(elem);\n        }\n      }\n\n      // If selector is a data attribute\n      if (selectorType === '[') {\n        if (elem.hasAttribute(selector.substr(1, selector.length - 1))) {\n          parents.push(elem);\n        }\n      }\n\n      // If selector is a tag\n      if (elem.tagName.toLowerCase() === selector) {\n        parents.push(elem);\n      }\n    } else {\n      parents.push(elem);\n    }\n  }\n\n  // Return parents if any exist\n  if (parents.length === 0) {\n    return null;\n  }\n  return parents;\n};\n\nclass Util {\n  constructor() {\n    this.addClass = addClass;\n    this.removeClass = removeClass;\n    this.hasClass = hasClass;\n    this.toggleClass = toggleClass;\n    this.addClassFor = addClassFor;\n    this.parseTemplate = parseTemplate;\n    this.triggerEvent = triggerEvent;\n    this.unique = unique;\n    this.closest = closest;\n    this.offset = offset;\n    this.insertAfter = insertAfter;\n    this.removeElement = removeElement;\n    this.isNumeric = isNumeric;\n    this.wrap = wrap;\n    this.stripTags = stripTags;\n    this.uniqueId = uniqueId;\n    this.uniqueName = uniqueName;\n    this.accurateNumber = accurateNumber;\n    this.limit = limit;\n    this.asArray = asArray;\n    this.countDecimals = countDecimals;\n    this.scrollTo = scrollTo;\n    this.randomIntFromInterval = randomIntFromInterval;\n    this.debounce = debounce;\n    this.throttle = throttle;\n    this.each = each;\n    this.exists = exists;\n    this.bytesToSize = bytesToSize;\n    this.getJson = getJson;\n    this.getParents = getParents;\n    this.getParentsUntil = getParentsUntil;\n  }\n}\n\nvl.util = new Util();\n\n// Export single utils\nexport default {\n  addClass,\n  removeClass,\n  hasClass,\n  toggleClass,\n  addClassFor,\n  parseTemplate,\n  triggerEvent,\n  unique,\n  closest,\n  offset,\n  insertAfter,\n  removeElement,\n  isNumeric,\n  wrap,\n  stripTags,\n  uniqueId,\n  uniqueName,\n  accurateNumber,\n  limit,\n  asArray,\n  countDecimals,\n  scrollTo,\n  randomIntFromInterval,\n  debounce,\n  throttle,\n  each,\n  exists,\n  bytesToSize,\n  getJson,\n  getParents,\n  getParentsUntil\n};\n"],"names":["window","vl","ns","debounce","func","wait","immediate","timeout","context","args","arguments","later","callNow","apply","clearTimeout","setTimeout","throttle","threshhold","scope","last","deferTimer","now","Number","Date","addClass","el","classes","classList","add","removeClass","remove","hasClass","contains","toggleClass","toggle","addClassFor","duration","parseTemplate","str","data","replace","match","parensMatch","triggerEvent","obj","evt","fireOnThis","evtObj","document","createEvent","initEvent","dispatchEvent","createEventObject","fireEvent","unique","array","filter","elem","pos","arr","indexOf","closest","value","to","Math","round","offset","rect","getBoundingClientRect","doc","ownerDocument","win","defaultView","parentWindow","docElem","documentElement","xOff","pageXOffset","test","navigator","userAgent","top","pageYOffset","clientTop","left","clientLeft","insertAfter","newElement","targetElement","parent","parentNode","lastchild","appendChild","insertBefore","nextSibling","removeElement","removeChild","isNumeric","number","isNaN","parseFloat","isFinite","wrap","wrapper","sibling","stripTags","html","tmp","createElement","innerHTML","textContent","innerText","uniqueId","idStrLen","idStr","floor","random","toString","getTime","length","uniqueName","substring","accurateNumber","p","pow","toFixed","limit","a","max","min","asArray","Array","isArray","countDecimals","numStr","pieces","split","scrollTo","callback","scrollTop","difference","perTick","randomIntFromInterval","each","fn","l","i","exists","nullAllowed","emptyAllowed","bytesToSize","bytes","addUnits","base","sizes","parseInt","log","getJson","url","xhr","XMLHttpRequest","open","responseType","onload","status","response","send","getParents","selector","parents","firstChar","charAt","substr","push","id","hasAttribute","tagName","toLowerCase","getParentsUntil","parentType","selectorType","Util","util"],"mappings":"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"}