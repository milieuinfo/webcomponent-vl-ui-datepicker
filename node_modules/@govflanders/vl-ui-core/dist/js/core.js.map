{"version":3,"file":"core.js","sources":["../../../vl-ui-util/src/js/util.js","../../src/js/feature-detection/js-detection.js","../../node_modules/promise-polyfill/src/index.js","../../node_modules/intersection-observer/intersection-observer.js","../../node_modules/css-vars-ponyfill/dist/css-vars-ponyfill.esm.js","../../node_modules/classlist-polyfill/src/index.js","../../src/js/polyfill/array-from.js","../../src/js/polyfill/closest.js","../../src/js/polyfill/foreach.js","../../src/js/polyfill/map.js","../../src/js/polyfill/object-assign.js","../../src/js/polyfill/request-animation-frame.js","../../src/js/polyfill/template.js","../../src/js/polyfill/trunk.js","../../src/js/polyfill/customevent.js","../../src/js/i18n/translations/nl.js","../../src/js/i18n/i18n.js","../../src/js/core.js"],"sourcesContent":["window.vl = window.vl || {ns: 'vl-'};\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nconst debounce = (func, wait, immediate = false) => {\n  let timeout;\n\n  return function() {\n    let context = this,\n      args = arguments,\n      later,\n      callNow;\n\n    later = () => {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n\n    callNow = immediate && !timeout;\n    window.clearTimeout(timeout);\n    timeout = window.setTimeout(later, wait);\n\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n};\n\nconst throttle = (func, threshhold = 250, scope) => {\n  let last, deferTimer;\n\n  return function() {\n    let context = scope || this,\n      now = Number(new Date()),\n      args = arguments;\n\n    if (last && now < last + threshhold) {\n      // hold on to it\n      window.clearTimeout(deferTimer);\n      deferTimer = window.setTimeout(() => {\n        last = now;\n        func.apply(context, args);\n      }, threshhold);\n    } else {\n      last = now;\n      func.apply(context, args);\n    }\n  };\n};\n\nconst addClass = (el, classes) => {\n  el.classList.add(classes);\n};\n\nconst removeClass = (el, classes) => {\n  el.classList.remove(classes);\n};\n\nconst hasClass = (el, classes) => {\n  return el.classList.contains(classes);\n};\n\nconst toggleClass = (el, classes) => {\n  el.classList.toggle(classes);\n};\n\nconst addClassFor = (el, classes, duration) => {\n  addClass(el, classes);\n\n  window.setTimeout(() => {\n    removeClass(el, classes);\n  }, duration);\n};\n\n// Helper function that takes an HTML string & an object to use for\n// \"binding\" its properties to the HTML template above.\nconst parseTemplate = (str, data) => {\n  return str.replace(/\\$\\{(\\w+)\\}/gi, (match, parensMatch) => {\n    if (typeof data[parensMatch] !== 'undefined') {\n      return data[parensMatch];\n    }\n    return match;\n  });\n};\n\n// trigger a custom event on an object\nconst triggerEvent = (obj, evt) => {\n  let fireOnThis = obj,\n    evtObj;\n\n  if (document.createEvent) {\n    evtObj = document.createEvent('MouseEvents');\n\n    evtObj.initEvent(evt, true, false);\n    fireOnThis.dispatchEvent(evtObj);\n  } else if (document.createEventObject) {\n    evtObj = document.createEventObject();\n\n    fireOnThis.fireEvent(`on${evt}`, evtObj);\n  }\n};\n\nconst unique = array => {\n  return array.filter((elem, pos, arr) => {\n    return arr.indexOf(elem) === pos;\n  });\n};\n\nconst closest = (value, to) => {\n  return Math.round(value / to) * to;\n};\n\n// Current position of an element relative to the document.\nconst offset = el => {\n  let rect = el.getBoundingClientRect(),\n    doc = el.ownerDocument,\n    win = doc.defaultView || doc.parentWindow,\n    docElem = doc.documentElement,\n    xOff = win.pageXOffset;\n\n  // getBoundingClientRect contains left scroll in Chrome on Android.\n  // I haven't found a feature detection that proves this. Worst case\n  // scenario on mis-match: the 'tap' feature on horizontal sliders breaks.\n  if (/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)) {\n    xOff = 0;\n  }\n\n  return {\n    top: rect.top + win.pageYOffset - docElem.clientTop,\n    left: rect.left + xOff - docElem.clientLeft\n  };\n};\n\n// Insert after\nconst insertAfter = (newElement, targetElement) => {\n  let parent = targetElement.parentNode;\n\n  // If targetElement is the parents last-child\n  if (parent.lastchild === targetElement) {\n    // Add the newElement after the target element\n    parent.appendChild(newElement);\n  } else {\n    // Target has siblings, insert the new element between the target and its next sibling\n    parent.insertBefore(newElement, targetElement.nextSibling);\n  }\n};\n\nconst removeElement = targetElement => {\n  let parent = targetElement.parentNode;\n\n  parent.removeChild(targetElement);\n};\n\nconst isNumeric = number => {\n  return !isNaN(parseFloat(number)) && isFinite(number);\n};\n\nconst wrap = (el, wrapper) => {\n  // Cache the current parent and sibling\n  let parent = el.parentNode,\n    sibling = el.nextSibling;\n\n  wrapper.appendChild(el);\n\n  /**\n   * If the element had a sibling, insert the wrapper before\n   * the sibling to maintain the HTML structure; otherwise, just\n   * append it to the parent.\n   */\n  if (sibling) {\n    parent.insertBefore(wrapper, sibling);\n  } else {\n    parent.appendChild(wrapper);\n  }\n};\n\n// Strip tags from element\nconst stripTags = html => {\n  let tmp = document.createElement('div');\n\n  tmp.innerHTML = html;\n  return tmp.textContent || tmp.innerText;\n};\n\n// Create a unique ID\nconst uniqueId = () => {\n  // Desired length of Id\n  // Always start with a letter -- base 36 makes for a nice shortcut\n  let idStrLen = 32,\n    idStr = `${(Math.floor(Math.random() * 25) + 10).toString(36)}_`;\n\n  // Add a timestamp in milliseconds (base 36 again) as the base\n  idStr += `${new Date().getTime().toString(36)}_`;\n\n  // Similar to above, complete the Id using random, alphanumeric characters\n  do {\n    idStr += Math.floor(Math.random() * 35).toString(36);\n  } while (idStr.length < idStrLen);\n\n  return idStr;\n};\n\n// Create a unique name\nconst uniqueName = () => {\n  return Math.random()\n    .toString(36)\n    .substring(2, 5);\n};\n\n// Rounds a number to 7 supported decimals\nconst accurateNumber = number => {\n  let p = Math.pow(10, 7);\n\n  return Number((Math.round(number * p) / p).toFixed(7));\n};\n\n// Limits a value to 0 - 100\nconst limit = a => {\n  return Math.max(Math.min(a, 100), 0);\n};\n\n// Wraps a variable as an array, if it isn't one yet.\nconst asArray = a => {\n  return Array.isArray(a) ? a : [a];\n};\n\n// Count decimals\nconst countDecimals = numStr => {\n  let pieces = numStr.split('.');\n\n  return pieces.length > 0 ? pieces[1].length : 0;\n};\n\n// Scroll element to specific position\n// TODO: use element.scrollIntoView instead, maybe with fallback if you want old browser to have a smooth scroll\nconst scrollTo = (el, to, duration, callback = () => {}) => {\n  let scrollTop = el.scrollTop,\n    difference = to - scrollTop,\n    perTick;\n\n  if (duration < 0) {\n    return;\n  }\n\n  perTick = difference / duration * 10;\n\n  window.setTimeout(() => {\n    if (scrollTop === to || duration <= 0) {\n      callback();\n    } else {\n      el.scrollTop = scrollTop + perTick;\n      scrollTo(el, to, duration - 10, callback);\n    }\n  }, 10);\n};\n\n// Gets a random number between min and max\nconst randomIntFromInterval = (min, max) => {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n};\n\n// Much faster each loop than a forEach loop\nconst each = (arr, fn) => {\n  let l = arr.length,\n    i = 0;\n\n  for (; i < l; i++) {\n    fn(arr[i], i);\n  }\n};\n\n/**\n * Determines if a certain value exists, is not null, and not empty\n * @method exists\n * @param  {type}  value value to check\n * @param  {Boolean} [nullAllowed = false] optional parameter to allow null\n * @param  {Boolean} [emptyAllowed = false] optional paramet to allow empty values\n * @return {Boolean}\n */\nconst exists = (value, nullAllowed = false, emptyAllowed = false) => {\n  if (typeof value !== 'undefined') {\n    if (nullAllowed || value !== null) {\n      if (emptyAllowed || value !== '') {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\nconst bytesToSize = (bytes, addUnits = true, base = 1024) => {\n  let sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'],\n    value = null,\n    i;\n\n  if (bytes === 0) {\n    value = addUnits ? '0 bytes' : 0;\n  } else {\n    i = parseInt(Math.floor(Math.log(bytes) / Math.log(base)), 10);\n\n    if (!addUnits) {\n      value =  Math.round(bytes / Math.pow(base, i), 2);\n    }\n\n    value = addUnits ? Math.round(bytes / Math.pow(base, i), 2) + ' ' + sizes[i] : Math.round(bytes / Math.pow(base, i), 2);\n  }\n\n  return value;\n};\n\nconst getJson = (url, callback) => {\n  let xhr = new XMLHttpRequest();\n\n  xhr.open('get', url, true);\n  xhr.responseType = 'json';\n  xhr.onload = function() {\n    let status = xhr.status;\n\n    if (status === 200) {\n      callback(null, xhr.response);\n    } else {\n      callback(status);\n    }\n  };\n  xhr.send();\n};\n\n/**\n * Get all DOM element up the tree that contain a class, ID, or data attribute\n * @param  {Node} elem The base element\n * @param  {String} selector The class, id, data attribute, or tag to look for\n * @return {Array} Null if no match\n */\nconst getParents = (elem, selector) => {\n  let parents = [],\n    firstChar;\n\n  if (selector) {\n    firstChar = selector.charAt(0);\n  }\n\n  // Get matches\n  for (; elem && elem !== document; elem = elem.parentNode) {\n    if (selector) {\n      // If selector is a class\n      if (firstChar === '.') {\n        if (elem.classList.contains(selector.substr(1))) {\n          parents.push(elem);\n        }\n      }\n\n      // If selector is an ID\n      if (firstChar === '#') {\n        if (elem.id === selector.substr(1)) {\n          parents.push(elem);\n        }\n      }\n\n      // If selector is a data attribute\n      if (firstChar === '[') {\n        if (elem.hasAttribute(selector.substr(1, selector.length - 1))) {\n          parents.push(elem);\n        }\n      }\n\n      // If selector is a tag\n      if (elem.tagName.toLowerCase() === selector) {\n        parents.push(elem);\n      }\n    } else {\n      parents.push(elem);\n    }\n  }\n\n  // Return parents if any exist\n  if (parents.length === 0) {\n    return null;\n  }\n  return parents;\n};\n\nconst getParentsUntil = (elem, parent, selector) => {\n  let parents = [],\n    parentType,\n    selectorType;\n\n  if (parent) {\n    parentType = parent.charAt(0);\n  }\n  if (selector) {\n    selectorType = selector.charAt(0);\n  }\n\n  // Get matches\n  for (; elem && elem !== document; elem = elem.parentNode) {\n    // Check if parent has been reached\n    if (parent) {\n      // If parent is a class\n      if (parentType === '.') {\n        if (elem.classList.contains(parent.substr(1))) {\n          break;\n        }\n      }\n\n      // If parent is an ID\n      if (parentType === '#') {\n        if (elem.id === parent.substr(1)) {\n          break;\n        }\n      }\n\n      // If parent is a data attribute\n      if (parentType === '[') {\n        if (elem.hasAttribute(parent.substr(1, parent.length - 1))) {\n          break;\n        }\n      }\n\n      // If parent is a tag\n      if (elem.tagName.toLowerCase() === parent) {\n        break;\n      }\n    }\n\n    if (selector) {\n      // If selector is a class\n      if (selectorType === '.') {\n        if (elem.classList.contains(selector.substr(1))) {\n          parents.push(elem);\n        }\n      }\n\n      // If selector is an ID\n      if (selectorType === '#') {\n        if (elem.id === selector.substr(1)) {\n          parents.push(elem);\n        }\n      }\n\n      // If selector is a data attribute\n      if (selectorType === '[') {\n        if (elem.hasAttribute(selector.substr(1, selector.length - 1))) {\n          parents.push(elem);\n        }\n      }\n\n      // If selector is a tag\n      if (elem.tagName.toLowerCase() === selector) {\n        parents.push(elem);\n      }\n    } else {\n      parents.push(elem);\n    }\n  }\n\n  // Return parents if any exist\n  if (parents.length === 0) {\n    return null;\n  }\n  return parents;\n};\n\nclass Util {\n  constructor() {\n    this.addClass = addClass;\n    this.removeClass = removeClass;\n    this.hasClass = hasClass;\n    this.toggleClass = toggleClass;\n    this.addClassFor = addClassFor;\n    this.parseTemplate = parseTemplate;\n    this.triggerEvent = triggerEvent;\n    this.unique = unique;\n    this.closest = closest;\n    this.offset = offset;\n    this.insertAfter = insertAfter;\n    this.removeElement = removeElement;\n    this.isNumeric = isNumeric;\n    this.wrap = wrap;\n    this.stripTags = stripTags;\n    this.uniqueId = uniqueId;\n    this.uniqueName = uniqueName;\n    this.accurateNumber = accurateNumber;\n    this.limit = limit;\n    this.asArray = asArray;\n    this.countDecimals = countDecimals;\n    this.scrollTo = scrollTo;\n    this.randomIntFromInterval = randomIntFromInterval;\n    this.debounce = debounce;\n    this.throttle = throttle;\n    this.each = each;\n    this.exists = exists;\n    this.bytesToSize = bytesToSize;\n    this.getJson = getJson;\n    this.getParents = getParents;\n    this.getParentsUntil = getParentsUntil;\n  }\n}\n\nvl.util = new Util();\n\n// Export single utils\nexport default {\n  addClass,\n  removeClass,\n  hasClass,\n  toggleClass,\n  addClassFor,\n  parseTemplate,\n  triggerEvent,\n  unique,\n  closest,\n  offset,\n  insertAfter,\n  removeElement,\n  isNumeric,\n  wrap,\n  stripTags,\n  uniqueId,\n  uniqueName,\n  accurateNumber,\n  limit,\n  asArray,\n  countDecimals,\n  scrollTo,\n  randomIntFromInterval,\n  debounce,\n  throttle,\n  each,\n  exists,\n  bytesToSize,\n  getJson,\n  getParents,\n  getParentsUntil\n};\n","const noJsClass = 'no-js',\n  jSclass = 'js';\n\n// Remove no-js class, add js class\nconst _jsDetection = () => {\n  if (vl.util.hasClass(document.documentElement, noJsClass)) {\n    vl.util.removeClass(document.documentElement, noJsClass);\n  }\n\n  vl.util.addClass(document.documentElement, jSclass);\n};\n\n_jsDetection();\n","// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  this._state = 0;\n  this._handled = false;\n  this._value = undefined;\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nvar _proto = Promise.prototype;\n_proto.catch = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\n_proto.then = function(onFulfilled, onRejected) {\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.\n *\n *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n *\n */\n\n(function(window, document) {\n'use strict';\n\n\n// Exits early if all IntersectionObserver and IntersectionObserverEntry\n// features are natively supported.\nif ('IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n\n  // Minimal polyfill for Edge 15's lack of `isIntersecting`\n  // See: https://github.com/w3c/IntersectionObserver/issues/211\n  if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\n    Object.defineProperty(window.IntersectionObserverEntry.prototype,\n      'isIntersecting', {\n      get: function () {\n        return this.intersectionRatio > 0;\n      }\n    });\n  }\n  return;\n}\n\n\n/**\n * An IntersectionObserver registry. This registry exists to hold a strong\n * reference to IntersectionObserver instances currently observing a target\n * element. Without this registry, instances without another reference may be\n * garbage collected.\n */\nvar registry = [];\n\n\n/**\n * Creates the global IntersectionObserverEntry constructor.\n * https://w3c.github.io/IntersectionObserver/#intersection-observer-entry\n * @param {Object} entry A dictionary of instance properties.\n * @constructor\n */\nfunction IntersectionObserverEntry(entry) {\n  this.time = entry.time;\n  this.target = entry.target;\n  this.rootBounds = entry.rootBounds;\n  this.boundingClientRect = entry.boundingClientRect;\n  this.intersectionRect = entry.intersectionRect || getEmptyRect();\n  this.isIntersecting = !!entry.intersectionRect;\n\n  // Calculates the intersection ratio.\n  var targetRect = this.boundingClientRect;\n  var targetArea = targetRect.width * targetRect.height;\n  var intersectionRect = this.intersectionRect;\n  var intersectionArea = intersectionRect.width * intersectionRect.height;\n\n  // Sets intersection ratio.\n  if (targetArea) {\n    // Round the intersection ratio to avoid floating point math issues:\n    // https://github.com/w3c/IntersectionObserver/issues/324\n    this.intersectionRatio = Number((intersectionArea / targetArea).toFixed(4));\n  } else {\n    // If area is zero and is intersecting, sets to 1, otherwise to 0\n    this.intersectionRatio = this.isIntersecting ? 1 : 0;\n  }\n}\n\n\n/**\n * Creates the global IntersectionObserver constructor.\n * https://w3c.github.io/IntersectionObserver/#intersection-observer-interface\n * @param {Function} callback The function to be invoked after intersection\n *     changes have queued. The function is not invoked if the queue has\n *     been emptied by calling the `takeRecords` method.\n * @param {Object=} opt_options Optional configuration options.\n * @constructor\n */\nfunction IntersectionObserver(callback, opt_options) {\n\n  var options = opt_options || {};\n\n  if (typeof callback != 'function') {\n    throw new Error('callback must be a function');\n  }\n\n  if (options.root && options.root.nodeType != 1) {\n    throw new Error('root must be an Element');\n  }\n\n  // Binds and throttles `this._checkForIntersections`.\n  this._checkForIntersections = throttle(\n      this._checkForIntersections.bind(this), this.THROTTLE_TIMEOUT);\n\n  // Private properties.\n  this._callback = callback;\n  this._observationTargets = [];\n  this._queuedEntries = [];\n  this._rootMarginValues = this._parseRootMargin(options.rootMargin);\n\n  // Public properties.\n  this.thresholds = this._initThresholds(options.threshold);\n  this.root = options.root || null;\n  this.rootMargin = this._rootMarginValues.map(function(margin) {\n    return margin.value + margin.unit;\n  }).join(' ');\n}\n\n\n/**\n * The minimum interval within which the document will be checked for\n * intersection changes.\n */\nIntersectionObserver.prototype.THROTTLE_TIMEOUT = 100;\n\n\n/**\n * The frequency in which the polyfill polls for intersection changes.\n * this can be updated on a per instance basis and must be set prior to\n * calling `observe` on the first target.\n */\nIntersectionObserver.prototype.POLL_INTERVAL = null;\n\n/**\n * Use a mutation observer on the root element\n * to detect intersection changes.\n */\nIntersectionObserver.prototype.USE_MUTATION_OBSERVER = true;\n\n\n/**\n * Starts observing a target element for intersection changes based on\n * the thresholds values.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.observe = function(target) {\n  var isTargetAlreadyObserved = this._observationTargets.some(function(item) {\n    return item.element == target;\n  });\n\n  if (isTargetAlreadyObserved) {\n    return;\n  }\n\n  if (!(target && target.nodeType == 1)) {\n    throw new Error('target must be an Element');\n  }\n\n  this._registerInstance();\n  this._observationTargets.push({element: target, entry: null});\n  this._monitorIntersections();\n  this._checkForIntersections();\n};\n\n\n/**\n * Stops observing a target element for intersection changes.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.unobserve = function(target) {\n  this._observationTargets =\n      this._observationTargets.filter(function(item) {\n\n    return item.element != target;\n  });\n  if (!this._observationTargets.length) {\n    this._unmonitorIntersections();\n    this._unregisterInstance();\n  }\n};\n\n\n/**\n * Stops observing all target elements for intersection changes.\n */\nIntersectionObserver.prototype.disconnect = function() {\n  this._observationTargets = [];\n  this._unmonitorIntersections();\n  this._unregisterInstance();\n};\n\n\n/**\n * Returns any queue entries that have not yet been reported to the\n * callback and clears the queue. This can be used in conjunction with the\n * callback to obtain the absolute most up-to-date intersection information.\n * @return {Array} The currently queued entries.\n */\nIntersectionObserver.prototype.takeRecords = function() {\n  var records = this._queuedEntries.slice();\n  this._queuedEntries = [];\n  return records;\n};\n\n\n/**\n * Accepts the threshold value from the user configuration object and\n * returns a sorted array of unique threshold values. If a value is not\n * between 0 and 1 and error is thrown.\n * @private\n * @param {Array|number=} opt_threshold An optional threshold value or\n *     a list of threshold values, defaulting to [0].\n * @return {Array} A sorted list of unique and valid threshold values.\n */\nIntersectionObserver.prototype._initThresholds = function(opt_threshold) {\n  var threshold = opt_threshold || [0];\n  if (!Array.isArray(threshold)) threshold = [threshold];\n\n  return threshold.sort().filter(function(t, i, a) {\n    if (typeof t != 'number' || isNaN(t) || t < 0 || t > 1) {\n      throw new Error('threshold must be a number between 0 and 1 inclusively');\n    }\n    return t !== a[i - 1];\n  });\n};\n\n\n/**\n * Accepts the rootMargin value from the user configuration object\n * and returns an array of the four margin values as an object containing\n * the value and unit properties. If any of the values are not properly\n * formatted or use a unit other than px or %, and error is thrown.\n * @private\n * @param {string=} opt_rootMargin An optional rootMargin value,\n *     defaulting to '0px'.\n * @return {Array<Object>} An array of margin objects with the keys\n *     value and unit.\n */\nIntersectionObserver.prototype._parseRootMargin = function(opt_rootMargin) {\n  var marginString = opt_rootMargin || '0px';\n  var margins = marginString.split(/\\s+/).map(function(margin) {\n    var parts = /^(-?\\d*\\.?\\d+)(px|%)$/.exec(margin);\n    if (!parts) {\n      throw new Error('rootMargin must be specified in pixels or percent');\n    }\n    return {value: parseFloat(parts[1]), unit: parts[2]};\n  });\n\n  // Handles shorthand.\n  margins[1] = margins[1] || margins[0];\n  margins[2] = margins[2] || margins[0];\n  margins[3] = margins[3] || margins[1];\n\n  return margins;\n};\n\n\n/**\n * Starts polling for intersection changes if the polling is not already\n * happening, and if the page's visibility state is visible.\n * @private\n */\nIntersectionObserver.prototype._monitorIntersections = function() {\n  if (!this._monitoringIntersections) {\n    this._monitoringIntersections = true;\n\n    // If a poll interval is set, use polling instead of listening to\n    // resize and scroll events or DOM mutations.\n    if (this.POLL_INTERVAL) {\n      this._monitoringInterval = setInterval(\n          this._checkForIntersections, this.POLL_INTERVAL);\n    }\n    else {\n      addEvent(window, 'resize', this._checkForIntersections, true);\n      addEvent(document, 'scroll', this._checkForIntersections, true);\n\n      if (this.USE_MUTATION_OBSERVER && 'MutationObserver' in window) {\n        this._domObserver = new MutationObserver(this._checkForIntersections);\n        this._domObserver.observe(document, {\n          attributes: true,\n          childList: true,\n          characterData: true,\n          subtree: true\n        });\n      }\n    }\n  }\n};\n\n\n/**\n * Stops polling for intersection changes.\n * @private\n */\nIntersectionObserver.prototype._unmonitorIntersections = function() {\n  if (this._monitoringIntersections) {\n    this._monitoringIntersections = false;\n\n    clearInterval(this._monitoringInterval);\n    this._monitoringInterval = null;\n\n    removeEvent(window, 'resize', this._checkForIntersections, true);\n    removeEvent(document, 'scroll', this._checkForIntersections, true);\n\n    if (this._domObserver) {\n      this._domObserver.disconnect();\n      this._domObserver = null;\n    }\n  }\n};\n\n\n/**\n * Scans each observation target for intersection changes and adds them\n * to the internal entries queue. If new entries are found, it\n * schedules the callback to be invoked.\n * @private\n */\nIntersectionObserver.prototype._checkForIntersections = function() {\n  var rootIsInDom = this._rootIsInDom();\n  var rootRect = rootIsInDom ? this._getRootRect() : getEmptyRect();\n\n  this._observationTargets.forEach(function(item) {\n    var target = item.element;\n    var targetRect = getBoundingClientRect(target);\n    var rootContainsTarget = this._rootContainsTarget(target);\n    var oldEntry = item.entry;\n    var intersectionRect = rootIsInDom && rootContainsTarget &&\n        this._computeTargetAndRootIntersection(target, rootRect);\n\n    var newEntry = item.entry = new IntersectionObserverEntry({\n      time: now(),\n      target: target,\n      boundingClientRect: targetRect,\n      rootBounds: rootRect,\n      intersectionRect: intersectionRect\n    });\n\n    if (!oldEntry) {\n      this._queuedEntries.push(newEntry);\n    } else if (rootIsInDom && rootContainsTarget) {\n      // If the new entry intersection ratio has crossed any of the\n      // thresholds, add a new entry.\n      if (this._hasCrossedThreshold(oldEntry, newEntry)) {\n        this._queuedEntries.push(newEntry);\n      }\n    } else {\n      // If the root is not in the DOM or target is not contained within\n      // root but the previous entry for this target had an intersection,\n      // add a new record indicating removal.\n      if (oldEntry && oldEntry.isIntersecting) {\n        this._queuedEntries.push(newEntry);\n      }\n    }\n  }, this);\n\n  if (this._queuedEntries.length) {\n    this._callback(this.takeRecords(), this);\n  }\n};\n\n\n/**\n * Accepts a target and root rect computes the intersection between then\n * following the algorithm in the spec.\n * TODO(philipwalton): at this time clip-path is not considered.\n * https://w3c.github.io/IntersectionObserver/#calculate-intersection-rect-algo\n * @param {Element} target The target DOM element\n * @param {Object} rootRect The bounding rect of the root after being\n *     expanded by the rootMargin value.\n * @return {?Object} The final intersection rect object or undefined if no\n *     intersection is found.\n * @private\n */\nIntersectionObserver.prototype._computeTargetAndRootIntersection =\n    function(target, rootRect) {\n\n  // If the element isn't displayed, an intersection can't happen.\n  if (window.getComputedStyle(target).display == 'none') return;\n\n  var targetRect = getBoundingClientRect(target);\n  var intersectionRect = targetRect;\n  var parent = getParentNode(target);\n  var atRoot = false;\n\n  while (!atRoot) {\n    var parentRect = null;\n    var parentComputedStyle = parent.nodeType == 1 ?\n        window.getComputedStyle(parent) : {};\n\n    // If the parent isn't displayed, an intersection can't happen.\n    if (parentComputedStyle.display == 'none') return;\n\n    if (parent == this.root || parent == document) {\n      atRoot = true;\n      parentRect = rootRect;\n    } else {\n      // If the element has a non-visible overflow, and it's not the <body>\n      // or <html> element, update the intersection rect.\n      // Note: <body> and <html> cannot be clipped to a rect that's not also\n      // the document rect, so no need to compute a new intersection.\n      if (parent != document.body &&\n          parent != document.documentElement &&\n          parentComputedStyle.overflow != 'visible') {\n        parentRect = getBoundingClientRect(parent);\n      }\n    }\n\n    // If either of the above conditionals set a new parentRect,\n    // calculate new intersection data.\n    if (parentRect) {\n      intersectionRect = computeRectIntersection(parentRect, intersectionRect);\n\n      if (!intersectionRect) break;\n    }\n    parent = getParentNode(parent);\n  }\n  return intersectionRect;\n};\n\n\n/**\n * Returns the root rect after being expanded by the rootMargin value.\n * @return {Object} The expanded root rect.\n * @private\n */\nIntersectionObserver.prototype._getRootRect = function() {\n  var rootRect;\n  if (this.root) {\n    rootRect = getBoundingClientRect(this.root);\n  } else {\n    // Use <html>/<body> instead of window since scroll bars affect size.\n    var html = document.documentElement;\n    var body = document.body;\n    rootRect = {\n      top: 0,\n      left: 0,\n      right: html.clientWidth || body.clientWidth,\n      width: html.clientWidth || body.clientWidth,\n      bottom: html.clientHeight || body.clientHeight,\n      height: html.clientHeight || body.clientHeight\n    };\n  }\n  return this._expandRectByRootMargin(rootRect);\n};\n\n\n/**\n * Accepts a rect and expands it by the rootMargin value.\n * @param {Object} rect The rect object to expand.\n * @return {Object} The expanded rect.\n * @private\n */\nIntersectionObserver.prototype._expandRectByRootMargin = function(rect) {\n  var margins = this._rootMarginValues.map(function(margin, i) {\n    return margin.unit == 'px' ? margin.value :\n        margin.value * (i % 2 ? rect.width : rect.height) / 100;\n  });\n  var newRect = {\n    top: rect.top - margins[0],\n    right: rect.right + margins[1],\n    bottom: rect.bottom + margins[2],\n    left: rect.left - margins[3]\n  };\n  newRect.width = newRect.right - newRect.left;\n  newRect.height = newRect.bottom - newRect.top;\n\n  return newRect;\n};\n\n\n/**\n * Accepts an old and new entry and returns true if at least one of the\n * threshold values has been crossed.\n * @param {?IntersectionObserverEntry} oldEntry The previous entry for a\n *    particular target element or null if no previous entry exists.\n * @param {IntersectionObserverEntry} newEntry The current entry for a\n *    particular target element.\n * @return {boolean} Returns true if a any threshold has been crossed.\n * @private\n */\nIntersectionObserver.prototype._hasCrossedThreshold =\n    function(oldEntry, newEntry) {\n\n  // To make comparing easier, an entry that has a ratio of 0\n  // but does not actually intersect is given a value of -1\n  var oldRatio = oldEntry && oldEntry.isIntersecting ?\n      oldEntry.intersectionRatio || 0 : -1;\n  var newRatio = newEntry.isIntersecting ?\n      newEntry.intersectionRatio || 0 : -1;\n\n  // Ignore unchanged ratios\n  if (oldRatio === newRatio) return;\n\n  for (var i = 0; i < this.thresholds.length; i++) {\n    var threshold = this.thresholds[i];\n\n    // Return true if an entry matches a threshold or if the new ratio\n    // and the old ratio are on the opposite sides of a threshold.\n    if (threshold == oldRatio || threshold == newRatio ||\n        threshold < oldRatio !== threshold < newRatio) {\n      return true;\n    }\n  }\n};\n\n\n/**\n * Returns whether or not the root element is an element and is in the DOM.\n * @return {boolean} True if the root element is an element and is in the DOM.\n * @private\n */\nIntersectionObserver.prototype._rootIsInDom = function() {\n  return !this.root || containsDeep(document, this.root);\n};\n\n\n/**\n * Returns whether or not the target element is a child of root.\n * @param {Element} target The target element to check.\n * @return {boolean} True if the target element is a child of root.\n * @private\n */\nIntersectionObserver.prototype._rootContainsTarget = function(target) {\n  return containsDeep(this.root || document, target);\n};\n\n\n/**\n * Adds the instance to the global IntersectionObserver registry if it isn't\n * already present.\n * @private\n */\nIntersectionObserver.prototype._registerInstance = function() {\n  if (registry.indexOf(this) < 0) {\n    registry.push(this);\n  }\n};\n\n\n/**\n * Removes the instance from the global IntersectionObserver registry.\n * @private\n */\nIntersectionObserver.prototype._unregisterInstance = function() {\n  var index = registry.indexOf(this);\n  if (index != -1) registry.splice(index, 1);\n};\n\n\n/**\n * Returns the result of the performance.now() method or null in browsers\n * that don't support the API.\n * @return {number} The elapsed time since the page was requested.\n */\nfunction now() {\n  return window.performance && performance.now && performance.now();\n}\n\n\n/**\n * Throttles a function and delays its execution, so it's only called at most\n * once within a given time period.\n * @param {Function} fn The function to throttle.\n * @param {number} timeout The amount of time that must pass before the\n *     function can be called again.\n * @return {Function} The throttled function.\n */\nfunction throttle(fn, timeout) {\n  var timer = null;\n  return function () {\n    if (!timer) {\n      timer = setTimeout(function() {\n        fn();\n        timer = null;\n      }, timeout);\n    }\n  };\n}\n\n\n/**\n * Adds an event handler to a DOM node ensuring cross-browser compatibility.\n * @param {Node} node The DOM node to add the event handler to.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to add.\n * @param {boolean} opt_useCapture Optionally adds the even to the capture\n *     phase. Note: this only works in modern browsers.\n */\nfunction addEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.addEventListener == 'function') {\n    node.addEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.attachEvent == 'function') {\n    node.attachEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Removes a previously added event handler from a DOM node.\n * @param {Node} node The DOM node to remove the event handler from.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to remove.\n * @param {boolean} opt_useCapture If the event handler was added with this\n *     flag set to true, it should be set to true here in order to remove it.\n */\nfunction removeEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.removeEventListener == 'function') {\n    node.removeEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.detatchEvent == 'function') {\n    node.detatchEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Returns the intersection between two rect objects.\n * @param {Object} rect1 The first rect.\n * @param {Object} rect2 The second rect.\n * @return {?Object} The intersection rect or undefined if no intersection\n *     is found.\n */\nfunction computeRectIntersection(rect1, rect2) {\n  var top = Math.max(rect1.top, rect2.top);\n  var bottom = Math.min(rect1.bottom, rect2.bottom);\n  var left = Math.max(rect1.left, rect2.left);\n  var right = Math.min(rect1.right, rect2.right);\n  var width = right - left;\n  var height = bottom - top;\n\n  return (width >= 0 && height >= 0) && {\n    top: top,\n    bottom: bottom,\n    left: left,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n\n/**\n * Shims the native getBoundingClientRect for compatibility with older IE.\n * @param {Element} el The element whose bounding rect to get.\n * @return {Object} The (possibly shimmed) rect of the element.\n */\nfunction getBoundingClientRect(el) {\n  var rect;\n\n  try {\n    rect = el.getBoundingClientRect();\n  } catch (err) {\n    // Ignore Windows 7 IE11 \"Unspecified error\"\n    // https://github.com/w3c/IntersectionObserver/pull/205\n  }\n\n  if (!rect) return getEmptyRect();\n\n  // Older IE\n  if (!(rect.width && rect.height)) {\n    rect = {\n      top: rect.top,\n      right: rect.right,\n      bottom: rect.bottom,\n      left: rect.left,\n      width: rect.right - rect.left,\n      height: rect.bottom - rect.top\n    };\n  }\n  return rect;\n}\n\n\n/**\n * Returns an empty rect object. An empty rect is returned when an element\n * is not in the DOM.\n * @return {Object} The empty rect.\n */\nfunction getEmptyRect() {\n  return {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: 0,\n    height: 0\n  };\n}\n\n/**\n * Checks to see if a parent element contains a child element (including inside\n * shadow DOM).\n * @param {Node} parent The parent element.\n * @param {Node} child The child element.\n * @return {boolean} True if the parent node contains the child node.\n */\nfunction containsDeep(parent, child) {\n  var node = child;\n  while (node) {\n    if (node == parent) return true;\n\n    node = getParentNode(node);\n  }\n  return false;\n}\n\n\n/**\n * Gets the parent node of an element or its host element if the parent node\n * is a shadow root.\n * @param {Node} node The node whose parent to get.\n * @return {Node|null} The parent node or null if no parent exists.\n */\nfunction getParentNode(node) {\n  var parent = node.parentNode;\n\n  if (parent && parent.nodeType == 11 && parent.host) {\n    // If the parent is a shadow root, return the host element.\n    return parent.host;\n  }\n  return parent;\n}\n\n\n// Exposes the constructors globally.\nwindow.IntersectionObserver = IntersectionObserver;\nwindow.IntersectionObserverEntry = IntersectionObserverEntry;\n\n}(window, document));\n","/*!\n * css-vars-ponyfill\n * v1.17.2\n * https://github.com/jhildenbiddle/css-vars-ponyfill\n * (c) 2018-2019 John Hildenbiddle <http://hildenbiddle.com>\n * MIT license\n */\nfunction _extends() {\n    _extends = Object.assign || function(target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i];\n            for (var key in source) {\n                if (Object.prototype.hasOwnProperty.call(source, key)) {\n                    target[key] = source[key];\n                }\n            }\n        }\n        return target;\n    };\n    return _extends.apply(this, arguments);\n}\n\nfunction _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n        for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n        return arr2;\n    }\n}\n\nfunction _iterableToArray(iter) {\n    if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\n/*!\n * get-css-data\n * v1.6.3\n * https://github.com/jhildenbiddle/get-css-data\n * (c) 2018-2019 John Hildenbiddle <http://hildenbiddle.com>\n * MIT license\n */ function getUrls(urls) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var settings = {\n        mimeType: options.mimeType || null,\n        onBeforeSend: options.onBeforeSend || Function.prototype,\n        onSuccess: options.onSuccess || Function.prototype,\n        onError: options.onError || Function.prototype,\n        onComplete: options.onComplete || Function.prototype\n    };\n    var urlArray = Array.isArray(urls) ? urls : [ urls ];\n    var urlQueue = Array.apply(null, Array(urlArray.length)).map(function(x) {\n        return null;\n    });\n    function isValidCss() {\n        var cssText = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n        var isHTML = cssText.trim().charAt(0) === \"<\";\n        return !isHTML;\n    }\n    function onError(xhr, urlIndex) {\n        settings.onError(xhr, urlArray[urlIndex], urlIndex);\n    }\n    function onSuccess(responseText, urlIndex) {\n        var returnVal = settings.onSuccess(responseText, urlArray[urlIndex], urlIndex);\n        responseText = returnVal === false ? \"\" : returnVal || responseText;\n        urlQueue[urlIndex] = responseText;\n        if (urlQueue.indexOf(null) === -1) {\n            settings.onComplete(urlQueue);\n        }\n    }\n    var parser = document.createElement(\"a\");\n    urlArray.forEach(function(url, i) {\n        parser.setAttribute(\"href\", url);\n        parser.href = String(parser.href);\n        var isIElte9 = Boolean(document.all && !window.atob);\n        var isIElte9CORS = isIElte9 && parser.host.split(\":\")[0] !== location.host.split(\":\")[0];\n        if (isIElte9CORS) {\n            var isSameProtocol = parser.protocol === location.protocol;\n            if (isSameProtocol) {\n                var xdr = new XDomainRequest();\n                xdr.open(\"GET\", url);\n                xdr.timeout = 0;\n                xdr.onprogress = Function.prototype;\n                xdr.ontimeout = Function.prototype;\n                xdr.onload = function() {\n                    if (isValidCss(xdr.responseText)) {\n                        onSuccess(xdr.responseText, i);\n                    } else {\n                        onError(xdr, i);\n                    }\n                };\n                xdr.onerror = function(err) {\n                    onError(xdr, i);\n                };\n                setTimeout(function() {\n                    xdr.send();\n                }, 0);\n            } else {\n                console.warn(\"Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (\".concat(url, \")\"));\n                onError(null, i);\n            }\n        } else {\n            var xhr = new XMLHttpRequest();\n            xhr.open(\"GET\", url);\n            if (settings.mimeType && xhr.overrideMimeType) {\n                xhr.overrideMimeType(settings.mimeType);\n            }\n            settings.onBeforeSend(xhr, url, i);\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState === 4) {\n                    if (xhr.status === 200 && isValidCss(xhr.responseText)) {\n                        onSuccess(xhr.responseText, i);\n                    } else {\n                        onError(xhr, i);\n                    }\n                }\n            };\n            xhr.send();\n        }\n    });\n}\n\n/**\n * Gets CSS data from <style> and <link> nodes (including @imports), then\n * returns data in order processed by DOM. Allows specifying nodes to\n * include/exclude and filtering CSS data using RegEx.\n *\n * @preserve\n * @param {object}   [options] The options object\n * @param {object}   [options.rootElement=document] Root element to traverse for\n *                   <link> and <style> nodes.\n * @param {string}   [options.include] CSS selector matching <link> and <style>\n *                   nodes to include\n * @param {string}   [options.exclude] CSS selector matching <link> and <style>\n *                   nodes to exclude\n * @param {object}   [options.filter] Regular expression used to filter node CSS\n *                   data. Each block of CSS data is tested against the filter,\n *                   and only matching data is included.\n * @param {object}   [options.useCSSOM=false] Determines if CSS data will be\n *                   collected from a stylesheet's runtime values instead of its\n *                   text content. This is required to get accurate CSS data\n *                   when a stylesheet has been modified using the deleteRule()\n *                   or insertRule() methods because these modifications will\n *                   not be reflected in the stylesheet's text content.\n * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes\n *                   1) the XHR object, 2) source node reference, and 3) the\n *                   source URL as arguments.\n * @param {function} [options.onSuccess] Callback on each CSS node read. Passes\n *                   1) CSS text, 2) source node reference, and 3) the source\n *                   URL as arguments.\n * @param {function} [options.onError] Callback on each error. Passes 1) the XHR\n *                   object for inspection, 2) soure node reference, and 3) the\n *                   source URL that failed (either a <link> href or an @import)\n *                   as arguments\n * @param {function} [options.onComplete] Callback after all nodes have been\n *                   processed. Passes 1) concatenated CSS text, 2) an array of\n *                   CSS text in DOM order, and 3) an array of nodes in DOM\n *                   order as arguments.\n *\n * @example\n *\n *   getCssData({\n *     rootElement: document,\n *     include    : 'style,link[rel=\"stylesheet\"]',\n *     exclude    : '[href=\"skip.css\"]',\n *     filter     : /red/,\n *     useCSSOM   : false,\n *     onBeforeSend(xhr, node, url) {\n *       // ...\n *     }\n *     onSuccess(cssText, node, url) {\n *       // ...\n *     }\n *     onError(xhr, node, url) {\n *       // ...\n *     },\n *     onComplete(cssText, cssArray, nodeArray) {\n *       // ...\n *     }\n *   });\n */ function getCssData(options) {\n    var regex = {\n        cssComments: /\\/\\*[\\s\\S]+?\\*\\//g,\n        cssImports: /(?:@import\\s*)(?:url\\(\\s*)?(?:['\"])([^'\"]*)(?:['\"])(?:\\s*\\))?(?:[^;]*;)/g\n    };\n    var settings = {\n        rootElement: options.rootElement || document,\n        include: options.include || 'style,link[rel=\"stylesheet\"]',\n        exclude: options.exclude || null,\n        filter: options.filter || null,\n        useCSSOM: options.useCSSOM || false,\n        onBeforeSend: options.onBeforeSend || Function.prototype,\n        onSuccess: options.onSuccess || Function.prototype,\n        onError: options.onError || Function.prototype,\n        onComplete: options.onComplete || Function.prototype\n    };\n    var sourceNodes = Array.apply(null, settings.rootElement.querySelectorAll(settings.include)).filter(function(node) {\n        return !matchesSelector(node, settings.exclude);\n    });\n    var cssArray = Array.apply(null, Array(sourceNodes.length)).map(function(x) {\n        return null;\n    });\n    function handleComplete() {\n        var isComplete = cssArray.indexOf(null) === -1;\n        if (isComplete) {\n            var cssText = cssArray.join(\"\");\n            settings.onComplete(cssText, cssArray, sourceNodes);\n        }\n    }\n    function handleSuccess(cssText, cssIndex, node, sourceUrl) {\n        var returnVal = settings.onSuccess(cssText, node, sourceUrl);\n        cssText = returnVal !== undefined && Boolean(returnVal) === false ? \"\" : returnVal || cssText;\n        resolveImports(cssText, node, sourceUrl, function(resolvedCssText, errorData) {\n            if (cssArray[cssIndex] === null) {\n                errorData.forEach(function(data) {\n                    return settings.onError(data.xhr, node, data.url);\n                });\n                if (!settings.filter || settings.filter.test(resolvedCssText)) {\n                    cssArray[cssIndex] = resolvedCssText;\n                } else {\n                    cssArray[cssIndex] = \"\";\n                }\n                handleComplete();\n            }\n        });\n    }\n    function parseImportData(cssText, baseUrl) {\n        var ignoreRules = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n        var importData = {};\n        importData.rules = (cssText.replace(regex.cssComments, \"\").match(regex.cssImports) || []).filter(function(rule) {\n            return ignoreRules.indexOf(rule) === -1;\n        });\n        importData.urls = importData.rules.map(function(rule) {\n            return rule.replace(regex.cssImports, \"$1\");\n        });\n        importData.absoluteUrls = importData.urls.map(function(url) {\n            return getFullUrl(url, baseUrl);\n        });\n        importData.absoluteRules = importData.rules.map(function(rule, i) {\n            var oldUrl = importData.urls[i];\n            var newUrl = getFullUrl(importData.absoluteUrls[i], baseUrl);\n            return rule.replace(oldUrl, newUrl);\n        });\n        return importData;\n    }\n    function resolveImports(cssText, node, baseUrl, callbackFn) {\n        var __errorData = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];\n        var __errorRules = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : [];\n        var importData = parseImportData(cssText, baseUrl, __errorRules);\n        if (importData.rules.length) {\n            getUrls(importData.absoluteUrls, {\n                onBeforeSend: function onBeforeSend(xhr, url, urlIndex) {\n                    settings.onBeforeSend(xhr, node, url);\n                },\n                onSuccess: function onSuccess(cssText, url, urlIndex) {\n                    var returnVal = settings.onSuccess(cssText, node, url);\n                    cssText = returnVal === false ? \"\" : returnVal || cssText;\n                    var responseImportData = parseImportData(cssText, url, __errorRules);\n                    responseImportData.rules.forEach(function(rule, i) {\n                        cssText = cssText.replace(rule, responseImportData.absoluteRules[i]);\n                    });\n                    return cssText;\n                },\n                onError: function onError(xhr, url, urlIndex) {\n                    __errorData.push({\n                        xhr: xhr,\n                        url: url\n                    });\n                    __errorRules.push(importData.rules[urlIndex]);\n                    resolveImports(cssText, node, baseUrl, callbackFn, __errorData, __errorRules);\n                },\n                onComplete: function onComplete(responseArray) {\n                    responseArray.forEach(function(importText, i) {\n                        cssText = cssText.replace(importData.rules[i], importText);\n                    });\n                    resolveImports(cssText, node, baseUrl, callbackFn, __errorData, __errorRules);\n                }\n            });\n        } else {\n            callbackFn(cssText, __errorData);\n        }\n    }\n    if (sourceNodes.length) {\n        sourceNodes.forEach(function(node, i) {\n            var linkHref = node.getAttribute(\"href\");\n            var linkRel = node.getAttribute(\"rel\");\n            var isLink = node.nodeName === \"LINK\" && linkHref && linkRel && linkRel.toLowerCase() === \"stylesheet\";\n            var isStyle = node.nodeName === \"STYLE\";\n            if (isLink) {\n                getUrls(linkHref, {\n                    mimeType: \"text/css\",\n                    onBeforeSend: function onBeforeSend(xhr, url, urlIndex) {\n                        settings.onBeforeSend(xhr, node, url);\n                    },\n                    onSuccess: function onSuccess(cssText, url, urlIndex) {\n                        var sourceUrl = getFullUrl(linkHref, location.href);\n                        handleSuccess(cssText, i, node, sourceUrl);\n                    },\n                    onError: function onError(xhr, url, urlIndex) {\n                        cssArray[i] = \"\";\n                        settings.onError(xhr, node, url);\n                        handleComplete();\n                    }\n                });\n            } else if (isStyle) {\n                var cssText = node.textContent;\n                if (settings.useCSSOM) {\n                    cssText = Array.apply(null, node.sheet.cssRules).map(function(rule) {\n                        return rule.cssText;\n                    }).join(\"\");\n                }\n                handleSuccess(cssText, i, node, location.href);\n            } else {\n                cssArray[i] = \"\";\n                handleComplete();\n            }\n        });\n    } else {\n        settings.onComplete(\"\", []);\n    }\n}\n\nfunction getFullUrl(url) {\n    var base = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : location.href;\n    var d = document.implementation.createHTMLDocument(\"\");\n    var b = d.createElement(\"base\");\n    var a = d.createElement(\"a\");\n    d.head.appendChild(b);\n    d.body.appendChild(a);\n    b.href = base;\n    a.href = url;\n    return a.href;\n}\n\nfunction matchesSelector(elm, selector) {\n    var matches = elm.matches || elm.matchesSelector || elm.webkitMatchesSelector || elm.mozMatchesSelector || elm.msMatchesSelector || elm.oMatchesSelector;\n    return matches.call(elm, selector);\n}\n\nvar balancedMatch = balanced;\n\nfunction balanced(a, b, str) {\n    if (a instanceof RegExp) a = maybeMatch(a, str);\n    if (b instanceof RegExp) b = maybeMatch(b, str);\n    var r = range(a, b, str);\n    return r && {\n        start: r[0],\n        end: r[1],\n        pre: str.slice(0, r[0]),\n        body: str.slice(r[0] + a.length, r[1]),\n        post: str.slice(r[1] + b.length)\n    };\n}\n\nfunction maybeMatch(reg, str) {\n    var m = str.match(reg);\n    return m ? m[0] : null;\n}\n\nbalanced.range = range;\n\nfunction range(a, b, str) {\n    var begs, beg, left, right, result;\n    var ai = str.indexOf(a);\n    var bi = str.indexOf(b, ai + 1);\n    var i = ai;\n    if (ai >= 0 && bi > 0) {\n        begs = [];\n        left = str.length;\n        while (i >= 0 && !result) {\n            if (i == ai) {\n                begs.push(i);\n                ai = str.indexOf(a, i + 1);\n            } else if (begs.length == 1) {\n                result = [ begs.pop(), bi ];\n            } else {\n                beg = begs.pop();\n                if (beg < left) {\n                    left = beg;\n                    right = bi;\n                }\n                bi = str.indexOf(b, i + 1);\n            }\n            i = ai < bi && ai >= 0 ? ai : bi;\n        }\n        if (begs.length) {\n            result = [ left, right ];\n        }\n    }\n    return result;\n}\n\nfunction parseCss(css) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var defaults = {\n        onlyVars: false,\n        removeComments: false\n    };\n    var settings = _extends({}, defaults, options);\n    var errors = [];\n    function error(msg) {\n        throw new Error(\"CSS parse error: \".concat(msg));\n    }\n    function match(re) {\n        var m = re.exec(css);\n        if (m) {\n            css = css.slice(m[0].length);\n            return m;\n        }\n    }\n    function open() {\n        return match(/^{\\s*/);\n    }\n    function close() {\n        return match(/^}/);\n    }\n    function whitespace() {\n        match(/^\\s*/);\n    }\n    function comment() {\n        whitespace();\n        if (css[0] !== \"/\" || css[1] !== \"*\") {\n            return;\n        }\n        var i = 2;\n        while (css[i] && (css[i] !== \"*\" || css[i + 1] !== \"/\")) {\n            i++;\n        }\n        if (!css[i]) {\n            return error(\"end of comment is missing\");\n        }\n        var str = css.slice(2, i);\n        css = css.slice(i + 2);\n        return {\n            type: \"comment\",\n            comment: str\n        };\n    }\n    function comments() {\n        var cmnts = [];\n        var c;\n        while (c = comment()) {\n            cmnts.push(c);\n        }\n        return settings.removeComments ? [] : cmnts;\n    }\n    function selector() {\n        whitespace();\n        while (css[0] === \"}\") {\n            error(\"extra closing bracket\");\n        }\n        var m = match(/^((\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'|[^{])+)/);\n        if (m) {\n            return m[0].trim().replace(/\\/\\*([^*]|[\\r\\n]|(\\*+([^*\\/]|[\\r\\n])))*\\*\\/+/g, \"\").replace(/\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, function(m) {\n                return m.replace(/,/g, \"‌\");\n            }).split(/\\s*(?![^(]*\\)),\\s*/).map(function(s) {\n                return s.replace(/\\u200C/g, \",\");\n            });\n        }\n    }\n    function declaration() {\n        match(/^([;\\s]*)+/);\n        var comment_regexp = /\\/\\*[^*]*\\*+([^\\/*][^*]*\\*+)*\\//g;\n        var prop = match(/^(\\*?[-#\\/*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/);\n        if (!prop) {\n            return;\n        }\n        prop = prop[0].trim();\n        if (!match(/^:\\s*/)) {\n            return error(\"property missing ':'\");\n        }\n        var val = match(/^((?:\\/\\*.*?\\*\\/|'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\((\\s*'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|[^)]*?)\\s*\\)|[^};])+)/);\n        var ret = {\n            type: \"declaration\",\n            property: prop.replace(comment_regexp, \"\"),\n            value: val ? val[0].replace(comment_regexp, \"\").trim() : \"\"\n        };\n        match(/^[;\\s]*/);\n        return ret;\n    }\n    function declarations() {\n        if (!open()) {\n            return error(\"missing '{'\");\n        }\n        var d;\n        var decls = comments();\n        while (d = declaration()) {\n            decls.push(d);\n            decls = decls.concat(comments());\n        }\n        if (!close()) {\n            return error(\"missing '}'\");\n        }\n        return decls;\n    }\n    function keyframe() {\n        whitespace();\n        var vals = [];\n        var m;\n        while (m = match(/^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/)) {\n            vals.push(m[1]);\n            match(/^,\\s*/);\n        }\n        if (vals.length) {\n            return {\n                type: \"keyframe\",\n                values: vals,\n                declarations: declarations()\n            };\n        }\n    }\n    function at_keyframes() {\n        var m = match(/^@([-\\w]+)?keyframes\\s*/);\n        if (!m) {\n            return;\n        }\n        var vendor = m[1];\n        m = match(/^([-\\w]+)\\s*/);\n        if (!m) {\n            return error(\"@keyframes missing name\");\n        }\n        var name = m[1];\n        if (!open()) {\n            return error(\"@keyframes missing '{'\");\n        }\n        var frame;\n        var frames = comments();\n        while (frame = keyframe()) {\n            frames.push(frame);\n            frames = frames.concat(comments());\n        }\n        if (!close()) {\n            return error(\"@keyframes missing '}'\");\n        }\n        return {\n            type: \"keyframes\",\n            name: name,\n            vendor: vendor,\n            keyframes: frames\n        };\n    }\n    function at_page() {\n        var m = match(/^@page */);\n        if (m) {\n            var sel = selector() || [];\n            return {\n                type: \"page\",\n                selectors: sel,\n                declarations: declarations()\n            };\n        }\n    }\n    function at_fontface() {\n        var m = match(/^@font-face\\s*/);\n        if (m) {\n            return {\n                type: \"font-face\",\n                declarations: declarations()\n            };\n        }\n    }\n    function at_supports() {\n        var m = match(/^@supports *([^{]+)/);\n        if (m) {\n            return {\n                type: \"supports\",\n                supports: m[1].trim(),\n                rules: rules()\n            };\n        }\n    }\n    function at_host() {\n        var m = match(/^@host\\s*/);\n        if (m) {\n            return {\n                type: \"host\",\n                rules: rules()\n            };\n        }\n    }\n    function at_media() {\n        var m = match(/^@media *([^{]+)/);\n        if (m) {\n            return {\n                type: \"media\",\n                media: m[1].trim(),\n                rules: rules()\n            };\n        }\n    }\n    function at_custom_m() {\n        var m = match(/^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/);\n        if (m) {\n            return {\n                type: \"custom-media\",\n                name: m[1].trim(),\n                media: m[2].trim()\n            };\n        }\n    }\n    function at_document() {\n        var m = match(/^@([-\\w]+)?document *([^{]+)/);\n        if (m) {\n            return {\n                type: \"document\",\n                document: m[2].trim(),\n                vendor: m[1] ? m[1].trim() : null,\n                rules: rules()\n            };\n        }\n    }\n    function at_x() {\n        var m = match(/^@(import|charset|namespace)\\s*([^;]+);/);\n        if (m) {\n            return {\n                type: m[1],\n                name: m[2].trim()\n            };\n        }\n    }\n    function at_rule() {\n        whitespace();\n        if (css[0] === \"@\") {\n            var ret = at_keyframes() || at_supports() || at_host() || at_media() || at_custom_m() || at_page() || at_document() || at_fontface() || at_x();\n            if (ret && settings.onlyVars) {\n                var hasVarFunc = false;\n                if (ret.declarations) {\n                    hasVarFunc = ret.declarations.some(function(decl) {\n                        return /var\\(/.test(decl.value);\n                    });\n                } else {\n                    var arr = ret.keyframes || ret.rules || [];\n                    hasVarFunc = arr.some(function(obj) {\n                        return (obj.declarations || []).some(function(decl) {\n                            return /var\\(/.test(decl.value);\n                        });\n                    });\n                }\n                return hasVarFunc ? ret : {};\n            }\n            return ret;\n        }\n    }\n    function rule() {\n        if (settings.onlyVars) {\n            var balancedMatch$$1 = balancedMatch(\"{\", \"}\", css);\n            if (balancedMatch$$1) {\n                var hasVarDecl = balancedMatch$$1.pre.indexOf(\":root\") !== -1 && /--\\S*\\s*:/.test(balancedMatch$$1.body);\n                var hasVarFunc = /var\\(/.test(balancedMatch$$1.body);\n                if (!hasVarDecl && !hasVarFunc) {\n                    css = css.slice(balancedMatch$$1.end + 1);\n                    return {};\n                }\n            }\n        }\n        var sel = selector() || [];\n        var decls = !settings.onlyVars ? declarations() : declarations().filter(function(decl) {\n            var hasVarDecl = sel.some(function(s) {\n                return s.indexOf(\":root\") !== -1;\n            }) && /^--\\S/.test(decl.property);\n            var hasVarFunc = /var\\(/.test(decl.value);\n            return hasVarDecl || hasVarFunc;\n        });\n        if (!sel.length) {\n            error(\"selector missing\");\n        }\n        return {\n            type: \"rule\",\n            selectors: sel,\n            declarations: decls\n        };\n    }\n    function rules(core) {\n        if (!core && !open()) {\n            return error(\"missing '{'\");\n        }\n        var node;\n        var rules = comments();\n        while (css.length && (core || css[0] !== \"}\") && (node = at_rule() || rule())) {\n            if (node.type) {\n                rules.push(node);\n            }\n            rules = rules.concat(comments());\n        }\n        if (!core && !close()) {\n            return error(\"missing '}'\");\n        }\n        return rules;\n    }\n    return {\n        type: \"stylesheet\",\n        stylesheet: {\n            rules: rules(true),\n            errors: errors\n        }\n    };\n}\n\nfunction stringifyCss(tree) {\n    var delim = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    var cb = arguments.length > 2 ? arguments[2] : undefined;\n    var renderMethods = {\n        charset: function charset(node) {\n            return \"@charset \" + node.name + \";\";\n        },\n        comment: function comment(node) {\n            return node.comment.indexOf(\"__CSSVARSPONYFILL\") === 0 ? \"/*\" + node.comment + \"*/\" : \"\";\n        },\n        \"custom-media\": function customMedia(node) {\n            return \"@custom-media \" + node.name + \" \" + node.media + \";\";\n        },\n        declaration: function declaration(node) {\n            return node.property + \":\" + node.value + \";\";\n        },\n        document: function document(node) {\n            return \"@\" + (node.vendor || \"\") + \"document \" + node.document + \"{\" + visit(node.rules) + \"}\";\n        },\n        \"font-face\": function fontFace(node) {\n            return \"@font-face\" + \"{\" + visit(node.declarations) + \"}\";\n        },\n        host: function host(node) {\n            return \"@host\" + \"{\" + visit(node.rules) + \"}\";\n        },\n        import: function _import(node) {\n            return \"@import \" + node.name + \";\";\n        },\n        keyframe: function keyframe(node) {\n            return node.values.join(\",\") + \"{\" + visit(node.declarations) + \"}\";\n        },\n        keyframes: function keyframes(node) {\n            return \"@\" + (node.vendor || \"\") + \"keyframes \" + node.name + \"{\" + visit(node.keyframes) + \"}\";\n        },\n        media: function media(node) {\n            return \"@media \" + node.media + \"{\" + visit(node.rules) + \"}\";\n        },\n        namespace: function namespace(node) {\n            return \"@namespace \" + node.name + \";\";\n        },\n        page: function page(node) {\n            return \"@page \" + (node.selectors.length ? node.selectors.join(\", \") : \"\") + \"{\" + visit(node.declarations) + \"}\";\n        },\n        rule: function rule(node) {\n            var decls = node.declarations;\n            if (decls.length) {\n                return node.selectors.join(\",\") + \"{\" + visit(decls) + \"}\";\n            }\n        },\n        supports: function supports(node) {\n            return \"@supports \" + node.supports + \"{\" + visit(node.rules) + \"}\";\n        }\n    };\n    function visit(nodes) {\n        var buf = \"\";\n        for (var i = 0; i < nodes.length; i++) {\n            var n = nodes[i];\n            if (cb) {\n                cb(n);\n            }\n            var txt = renderMethods[n.type](n);\n            if (txt) {\n                buf += txt;\n                if (txt.length && n.selectors) {\n                    buf += delim;\n                }\n            }\n        }\n        return buf;\n    }\n    return visit(tree.stylesheet.rules);\n}\n\nfunction walkCss(node, fn) {\n    node.rules.forEach(function(rule) {\n        if (rule.rules) {\n            walkCss(rule, fn);\n            return;\n        }\n        if (rule.keyframes) {\n            rule.keyframes.forEach(function(keyframe) {\n                if (keyframe.type === \"keyframe\") {\n                    fn(keyframe.declarations, rule);\n                }\n            });\n            return;\n        }\n        if (!rule.declarations) {\n            return;\n        }\n        fn(rule.declarations, node);\n    });\n}\n\nvar VAR_PROP_IDENTIFIER = \"--\";\n\nvar VAR_FUNC_IDENTIFIER = \"var\";\n\nvar variableStore = {\n    dom: {},\n    temp: {},\n    user: {}\n};\n\nfunction transformVars(cssText) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var defaults = {\n        fixNestedCalc: true,\n        onlyVars: false,\n        persist: false,\n        preserve: false,\n        variables: {},\n        onWarning: function onWarning() {}\n    };\n    var settings = _extends({}, defaults, options);\n    var map = settings.persist ? variableStore.dom : variableStore.temp = JSON.parse(JSON.stringify(variableStore.dom));\n    var cssTree = parseCss(cssText, {\n        onlyVars: settings.onlyVars\n    });\n    cssTree.stylesheet.rules.forEach(function(rule) {\n        var varNameIndices = [];\n        if (rule.type !== \"rule\") {\n            return;\n        }\n        if (rule.selectors.length !== 1 || rule.selectors[0] !== \":root\") {\n            return;\n        }\n        rule.declarations.forEach(function(decl, i) {\n            var prop = decl.property;\n            var value = decl.value;\n            if (prop && prop.indexOf(VAR_PROP_IDENTIFIER) === 0) {\n                map[prop] = value;\n                varNameIndices.push(i);\n            }\n        });\n        if (!settings.preserve) {\n            for (var i = varNameIndices.length - 1; i >= 0; i--) {\n                rule.declarations.splice(varNameIndices[i], 1);\n            }\n        }\n    });\n    Object.keys(variableStore.user).forEach(function(key) {\n        map[key] = variableStore.user[key];\n    });\n    if (Object.keys(settings.variables).length) {\n        var newRule = {\n            declarations: [],\n            selectors: [ \":root\" ],\n            type: \"rule\"\n        };\n        Object.keys(settings.variables).forEach(function(key) {\n            var prop = \"--\".concat(key.replace(/^-+/, \"\"));\n            var value = settings.variables[key];\n            if (settings.persist) {\n                variableStore.user[prop] = value;\n            }\n            if (map[prop] !== value) {\n                map[prop] = value;\n                newRule.declarations.push({\n                    type: \"declaration\",\n                    property: prop,\n                    value: value\n                });\n            }\n        });\n        if (settings.preserve && newRule.declarations.length) {\n            cssTree.stylesheet.rules.push(newRule);\n        }\n    }\n    walkCss(cssTree.stylesheet, function(declarations, node) {\n        var decl;\n        var resolvedValue;\n        var value;\n        for (var i = 0; i < declarations.length; i++) {\n            decl = declarations[i];\n            value = decl.value;\n            if (decl.type !== \"declaration\") {\n                continue;\n            }\n            if (!value || value.indexOf(VAR_FUNC_IDENTIFIER + \"(\") === -1) {\n                continue;\n            }\n            resolvedValue = resolveValue(value, map, settings);\n            if (resolvedValue !== decl.value) {\n                if (!settings.preserve) {\n                    decl.value = resolvedValue;\n                } else {\n                    declarations.splice(i, 0, {\n                        type: decl.type,\n                        property: decl.property,\n                        value: resolvedValue\n                    });\n                    i++;\n                }\n            }\n        }\n    });\n    if (settings.fixNestedCalc) {\n        fixNestedCalc(cssTree.stylesheet.rules);\n    }\n    return stringifyCss(cssTree);\n}\n\nfunction fixNestedCalc(rules) {\n    var reCalcExp = /(-[a-z]+-)?calc\\(/;\n    rules.forEach(function(rule) {\n        if (rule.declarations) {\n            rule.declarations.forEach(function(decl) {\n                var oldValue = decl.value;\n                var newValue = \"\";\n                while (reCalcExp.test(oldValue)) {\n                    var rootCalc = balancedMatch(\"calc(\", \")\", oldValue || \"\");\n                    oldValue = oldValue.slice(rootCalc.end);\n                    while (reCalcExp.test(rootCalc.body)) {\n                        var nestedCalc = balancedMatch(reCalcExp, \")\", rootCalc.body);\n                        rootCalc.body = \"\".concat(nestedCalc.pre, \"(\").concat(nestedCalc.body, \")\").concat(nestedCalc.post);\n                    }\n                    newValue += \"\".concat(rootCalc.pre, \"calc(\").concat(rootCalc.body);\n                    newValue += !reCalcExp.test(oldValue) ? \")\".concat(rootCalc.post) : \"\";\n                }\n                decl.value = newValue || decl.value;\n            });\n        }\n    });\n}\n\nfunction resolveValue(value, map) {\n    var settings = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var __recursiveFallback = arguments.length > 3 ? arguments[3] : undefined;\n    if (value.indexOf(\"var(\") === -1) {\n        return value;\n    }\n    var valueData = balancedMatch(\"(\", \")\", value);\n    function resolveFunc(value) {\n        var name = value.split(\",\")[0].replace(/[\\s\\n\\t]/g, \"\");\n        var fallback = (value.match(/(?:\\s*,\\s*){1}(.*)?/) || [])[1];\n        var match = map.hasOwnProperty(name) ? String(map[name]) : undefined;\n        var replacement = match || (fallback ? String(fallback) : undefined);\n        var unresolvedFallback = __recursiveFallback || value;\n        if (!match) {\n            settings.onWarning('variable \"'.concat(name, '\" is undefined'));\n        }\n        if (replacement && replacement !== \"undefined\" && replacement.length > 0) {\n            return resolveValue(replacement, map, settings, unresolvedFallback);\n        } else {\n            return \"var(\".concat(unresolvedFallback, \")\");\n        }\n    }\n    if (!valueData) {\n        if (value.indexOf(\"var(\") !== -1) {\n            settings.onWarning('missing closing \")\" in the value \"'.concat(value, '\"'));\n        }\n        return value;\n    } else if (valueData.pre.slice(-3) === \"var\") {\n        var isEmptyVarFunc = valueData.body.trim().length === 0;\n        if (isEmptyVarFunc) {\n            settings.onWarning(\"var() must contain a non-whitespace string\");\n            return value;\n        } else {\n            return valueData.pre.slice(0, -3) + resolveFunc(valueData.body) + resolveValue(valueData.post, map, settings);\n        }\n    } else {\n        return valueData.pre + \"(\".concat(resolveValue(valueData.body, map, settings), \")\") + resolveValue(valueData.post, map, settings);\n    }\n}\n\nvar name = \"css-vars-ponyfill\";\n\nvar isBrowser = typeof window !== \"undefined\";\n\nvar isNativeSupport = isBrowser && window.CSS && window.CSS.supports && window.CSS.supports(\"(--a: 0)\");\n\nvar consoleMsgPrefix = \"cssVars(): \";\n\nvar defaults = {\n    rootElement: isBrowser ? document : null,\n    shadowDOM: false,\n    include: \"style,link[rel=stylesheet]\",\n    exclude: \"\",\n    variables: {},\n    fixNestedCalc: true,\n    onlyLegacy: true,\n    onlyVars: false,\n    preserve: false,\n    silent: false,\n    updateDOM: true,\n    updateURLs: true,\n    watch: null,\n    onBeforeSend: function onBeforeSend() {},\n    onSuccess: function onSuccess() {},\n    onWarning: function onWarning() {},\n    onError: function onError() {},\n    onComplete: function onComplete() {}\n};\n\nvar regex = {\n    cssComments: /\\/\\*[\\s\\S]+?\\*\\//g,\n    cssKeyframes: /@(?:-\\w*-)?keyframes/,\n    cssRootRules: /(?::root\\s*{\\s*[^}]*})/g,\n    cssUrls: /url\\((?!['\"]?(?:data|http|\\/\\/):)['\"]?([^'\")]*)['\"]?\\)/g,\n    cssVars: /(?:(?::root\\s*{\\s*[^;]*;*\\s*)|(?:var\\(\\s*))(--[^:)]+)(?:\\s*[:)])/\n};\n\nvar cssVarsObserver = null;\n\nvar debounceTimer = null;\n\nvar isShadowDOMReady = false;\n\n/**\n * Fetches, parses, and transforms CSS custom properties from specified\n * <style> and <link> elements into static values, then appends a new <style>\n * element with static values to the DOM to provide CSS custom property\n * compatibility for legacy browsers. Also provides a single interface for\n * live updates of runtime values in both modern and legacy browsers.\n *\n * @preserve\n * @param {object}   [options] Options object\n * @param {object}   [options.rootElement=document] Root element to traverse for\n *                   <link> and <style> nodes.\n * @param {boolean}  [options.shadowDOM=false] Determines if shadow DOM <link>\n *                   and <style> nodes will be processed.\n * @param {string}   [options.include=\"style,link[rel=stylesheet]\"] CSS selector\n *                   matching <link re=\"stylesheet\"> and <style> nodes to\n *                   process\n * @param {string}   [options.exclude] CSS selector matching <link\n *                   rel=\"stylehseet\"> and <style> nodes to exclude from those\n *                   matches by options.include\n * @param {object}   [options.variables] A map of custom property name/value\n *                   pairs. Property names can omit or include the leading\n *                   double-hyphen (—), and values specified will override\n *                   previous values.\n * @param {boolean}  [options.fixNestedCalc=true] Removes nested 'calc' keywords\n *                   for legacy browser compatibility.\n * @param {boolean}  [options.onlyLegacy=true] Determines if the ponyfill will\n *                   only generate legacy-compatible CSS in browsers that lack\n *                   native support (i.e., legacy browsers)\n * @param {boolean}  [options.onlyVars=false] Determines if CSS rulesets and\n *                   declarations without a custom property value should be\n *                   removed from the ponyfill-generated CSS\n * @param {boolean}  [options.preserve=false] Determines if the original CSS\n *                   custom property declaration will be retained in the\n *                   ponyfill-generated CSS.\n * @param {boolean}  [options.silent=false] Determines if warning and error\n *                   messages will be displayed on the console\n * @param {boolean}  [options.updateDOM=true] Determines if the ponyfill will\n *                   update the DOM after processing CSS custom properties\n * @param {boolean}  [options.updateURLs=true] Determines if the ponyfill will\n *                   convert relative url() paths to absolute urls.\n * @param {boolean}  [options.watch=false] Determines if a MutationObserver will\n *                   be created that will execute the ponyfill when a <link> or\n *                   <style> DOM mutation is observed.\n * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes\n *                   1) the XHR object, 2) source node reference, and 3) the\n *                   source URL as arguments.\n * @param {function} [options.onSuccess] Callback after CSS data has been\n *                   collected from each node and before CSS custom properties\n *                   have been transformed. Allows modifying the CSS data before\n *                   it is transformed by returning any string value (or false\n *                   to skip). Passes 1) CSS text, 2) source node reference, and\n *                   3) the source URL as arguments.\n * @param {function} [options.onWarning] Callback after each CSS parsing warning\n *                   has occurred. Passes 1) a warning message as an argument.\n * @param {function} [options.onError] Callback after a CSS parsing error has\n *                   occurred or an XHR request has failed. Passes 1) an error\n *                   message, and 2) source node reference, 3) xhr, and 4 url as\n *                   arguments.\n * @param {function} [options.onComplete] Callback after all CSS has been\n *                   processed, legacy-compatible CSS has been generated, and\n *                   (optionally) the DOM has been updated. Passes 1) a CSS\n *                   string with CSS variable values resolved, 2) a reference to\n *                   the appended <style> node, 3) an object containing all\n *                   custom properies names and values, and 4) the ponyfill\n *                   execution time in milliseconds.\n *\n * @example\n *\n *   cssVars({\n *     rootElement  : document,\n *     shadowDOM    : false,\n *     include      : 'style,link[rel=\"stylesheet\"]',\n *     exclude      : '',\n *     variables    : {},\n *     fixNestedCalc: true,\n *     onlyLegacy   : true,\n *     onlyVars     : false,\n *     preserve     : false,\n *     silent       : false,\n *     updateDOM    : true,\n *     updateURLs   : true,\n *     watch        : false,\n *     onBeforeSend(xhr, node, url) {},\n *     onSuccess(cssText, node, url) {},\n *     onWarning(message) {},\n *     onError(message, node, xhr, url) {},\n *     onComplete(cssText, styleNode, cssVariables, benchmark) {}\n *   });\n */ function cssVars() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var settings = _extends({}, defaults, options);\n    var styleNodeId = name;\n    settings.exclude = \"#\".concat(styleNodeId) + (settings.exclude ? \",\".concat(settings.exclude) : \"\");\n    settings._benchmark = !settings._benchmark ? getTimeStamp() : settings._benchmark;\n    function handleError(message, sourceNode, xhr, url) {\n        if (!settings.silent) {\n            console.error(\"\".concat(consoleMsgPrefix).concat(message, \"\\n\"), sourceNode);\n        }\n        settings.onError(message, sourceNode, xhr, url);\n    }\n    function handleWarning(message) {\n        if (!settings.silent) {\n            console.warn(\"\".concat(consoleMsgPrefix).concat(message));\n        }\n        settings.onWarning(message);\n    }\n    if (!isBrowser) {\n        return;\n    }\n    if (settings.watch === false && cssVarsObserver) {\n        cssVarsObserver.disconnect();\n    }\n    if (settings.watch) {\n        addMutationObserver(settings, styleNodeId);\n        cssVarsDebounced(settings);\n    } else if (document.readyState !== \"loading\") {\n        var isShadowElm = settings.shadowDOM || settings.rootElement.shadowRoot || settings.rootElement.host;\n        if (isNativeSupport && settings.onlyLegacy) {\n            if (settings.updateDOM) {\n                var targetElm = settings.rootElement.host || (settings.rootElement === document ? document.documentElement : settings.rootElement);\n                Object.keys(settings.variables).forEach(function(key) {\n                    var prop = \"--\".concat(key.replace(/^-+/, \"\"));\n                    var value = settings.variables[key];\n                    targetElm.style.setProperty(prop, value);\n                });\n            }\n        } else if (isShadowElm && !isShadowDOMReady) {\n            getCssData({\n                rootElement: defaults.rootElement,\n                include: defaults.include,\n                exclude: settings.exclude,\n                onSuccess: function onSuccess(cssText, node, url) {\n                    var cssRootDecls = (cssText.match(regex.cssRootRules) || []).join(\"\");\n                    return cssRootDecls || false;\n                },\n                onComplete: function onComplete(cssText, cssArray, nodeArray) {\n                    transformVars(cssText, {\n                        persist: true\n                    });\n                    isShadowDOMReady = true;\n                    cssVars(settings);\n                }\n            });\n        } else {\n            getCssData({\n                rootElement: settings.rootElement,\n                include: settings.include,\n                exclude: settings.exclude,\n                filter: settings.onlyVars ? regex.cssVars : null,\n                onBeforeSend: settings.onBeforeSend,\n                onSuccess: function onSuccess(cssText, node, url) {\n                    var returnVal = settings.onSuccess(cssText, node, url);\n                    cssText = returnVal !== undefined && Boolean(returnVal) === false ? \"\" : returnVal || cssText;\n                    node.setAttribute(\"data-cssvars\", \"\");\n                    if (settings.updateURLs) {\n                        var cssUrls = cssText.replace(regex.cssComments, \"\").match(regex.cssUrls) || [];\n                        cssUrls.forEach(function(cssUrl) {\n                            var oldUrl = cssUrl.replace(regex.cssUrls, \"$1\");\n                            var newUrl = getFullUrl$1(oldUrl, url);\n                            cssText = cssText.replace(cssUrl, cssUrl.replace(oldUrl, newUrl));\n                        });\n                    }\n                    return cssText;\n                },\n                onError: function onError(xhr, node, url) {\n                    var responseUrl = xhr.responseURL || getFullUrl$1(url, location.href);\n                    var statusText = xhr.statusText ? \"(\".concat(xhr.statusText, \")\") : \"Unspecified Error\" + (xhr.status === 0 ? \" (possibly CORS related)\" : \"\");\n                    var errorMsg = \"CSS XHR Error: \".concat(responseUrl, \" \").concat(xhr.status, \" \").concat(statusText);\n                    handleError(errorMsg, node, xhr, responseUrl);\n                },\n                onComplete: function onComplete(cssText, cssArray, nodeArray) {\n                    var cssMarker = /\\/\\*__CSSVARSPONYFILL-(\\d+)__\\*\\//g;\n                    var cssSettings = JSON.stringify({\n                        include: settings.include,\n                        exclude: settings.exclude,\n                        variables: settings.variables,\n                        fixNestedCalc: settings.fixNestedCalc,\n                        onlyVars: settings.onlyVars,\n                        preserve: settings.preserve,\n                        silent: settings.silent,\n                        updateURLs: settings.updateURLs\n                    });\n                    var styleNode = settings.rootElement.querySelector(\"#\".concat(styleNodeId)) || document.createElement(\"style\");\n                    var prevData = styleNode.__cssVars || {};\n                    var isSameData = prevData.cssText === cssText && prevData.settings === cssSettings;\n                    var hasKeyframesWithVars;\n                    if (isSameData) {\n                        cssText = styleNode.textContent;\n                        if (!settings.silent) {\n                            console.info(\"\".concat(consoleMsgPrefix, \"No changes\"), styleNode);\n                        }\n                    } else {\n                        styleNode.__cssVars = {\n                            cssText: cssText,\n                            settings: cssSettings\n                        };\n                        cssText = cssArray.map(function(css, i) {\n                            return regex.cssVars.test(css) ? css : \"/*__CSSVARSPONYFILL-\".concat(i, \"__*/\");\n                        }).join(\"\");\n                        try {\n                            cssText = transformVars(cssText, {\n                                fixNestedCalc: settings.fixNestedCalc,\n                                onlyVars: settings.onlyVars,\n                                persist: settings.updateDOM,\n                                preserve: settings.preserve,\n                                variables: settings.variables,\n                                onWarning: handleWarning\n                            });\n                            hasKeyframesWithVars = regex.cssKeyframes.test(cssText);\n                            cssText = cssText.replace(cssMarker, function(match, group1) {\n                                return cssArray[group1];\n                            });\n                        } catch (err) {\n                            var errorThrown = false;\n                            cssArray.forEach(function(cssText, i) {\n                                try {\n                                    cssText = transformVars(cssText, settings);\n                                } catch (err) {\n                                    var errorNode = nodeArray[i - 0];\n                                    errorThrown = true;\n                                    handleError(err.message, errorNode);\n                                }\n                            });\n                            if (!errorThrown) {\n                                handleError(err.message || err);\n                            }\n                        }\n                    }\n                    if (settings.shadowDOM) {\n                        var elms = [ settings.rootElement ].concat(_toConsumableArray(settings.rootElement.querySelectorAll(\"*\")));\n                        for (var i = 0, elm; elm = elms[i]; ++i) {\n                            if (elm.shadowRoot && elm.shadowRoot.querySelector(\"style\")) {\n                                var shadowSettings = _extends({}, settings, {\n                                    rootElement: elm.shadowRoot,\n                                    variables: variableStore.dom\n                                });\n                                cssVars(shadowSettings);\n                            }\n                        }\n                    }\n                    if (!isSameData && nodeArray && nodeArray.length) {\n                        var cssNodes = settings.rootElement.querySelectorAll(\"link[data-cssvars],style[data-cssvars]\") || settings.rootElement.querySelectorAll('link[rel+=\"stylesheet\"],style');\n                        var lastNode = cssNodes ? cssNodes[cssNodes.length - 1] : null;\n                        if (lastNode) {\n                            lastNode.parentNode.insertBefore(styleNode, lastNode.nextSibling);\n                        } else {\n                            var targetNode = settings.rootElement.head || settings.rootElement.body || settings.rootElement;\n                            targetNode.appendChild(styleNode);\n                        }\n                        if (settings.updateDOM) {\n                            styleNode.setAttribute(\"id\", styleNodeId);\n                            styleNode.textContent = cssText;\n                            if (hasKeyframesWithVars) {\n                                fixKeyframes(settings.rootElement);\n                            }\n                        }\n                        settings.onComplete(cssText, styleNode, JSON.parse(JSON.stringify(settings.updateDOM ? variableStore.dom : variableStore.temp)), getTimeStamp() - settings._benchmark);\n                    }\n                }\n            });\n        }\n    } else {\n        document.addEventListener(\"DOMContentLoaded\", function init(evt) {\n            cssVars(options);\n            document.removeEventListener(\"DOMContentLoaded\", init);\n        });\n    }\n}\n\nfunction cssVarsDebounced(settings) {\n    clearTimeout(debounceTimer);\n    debounceTimer = setTimeout(function() {\n        settings._benchmark = null;\n        cssVars(settings);\n    }, 100);\n}\n\nfunction addMutationObserver(settings, ignoreId) {\n    if (!window.MutationObserver) {\n        return;\n    }\n    var isLink = function isLink(node) {\n        return node.tagName === \"LINK\" && (node.getAttribute(\"rel\") || \"\").indexOf(\"stylesheet\") !== -1;\n    };\n    var isStyle = function isStyle(node) {\n        return node.tagName === \"STYLE\" && (ignoreId ? node.id !== ignoreId : true);\n    };\n    if (cssVarsObserver) {\n        cssVarsObserver.disconnect();\n    }\n    settings.watch = defaults.watch;\n    cssVarsObserver = new MutationObserver(function(mutations) {\n        var hasCSSMutation = mutations.some(function(mutation) {\n            var isCSSMutation = false;\n            if (mutation.type === \"attributes\") {\n                isCSSMutation = isLink(mutation.target) || isStyle(mutation.target);\n            } else if (mutation.type === \"childList\") {\n                var addedNodes = Array.apply(null, mutation.addedNodes);\n                var removedNodes = Array.apply(null, mutation.removedNodes);\n                isCSSMutation = [].concat(addedNodes, removedNodes).some(function(node) {\n                    var isValidLink = isLink(node) && !node.disabled;\n                    var isValidStyle = isStyle(node) && regex.cssVars.test(node.textContent);\n                    return isValidLink || isValidStyle;\n                });\n            }\n            return isCSSMutation;\n        });\n        if (hasCSSMutation) {\n            cssVarsDebounced(settings);\n        }\n    });\n    cssVarsObserver.observe(document.documentElement, {\n        attributes: true,\n        attributeFilter: [ \"disabled\", \"href\" ],\n        childList: true,\n        subtree: true\n    });\n}\n\nfunction fixKeyframes(rootElement) {\n    var animationNameProp = [ \"animation-name\", \"-moz-animation-name\", \"-webkit-animation-name\" ].filter(function(prop) {\n        return getComputedStyle(document.body)[prop];\n    })[0];\n    if (animationNameProp) {\n        var allNodes = rootElement.getElementsByTagName(\"*\");\n        var keyframeNodes = [];\n        var nameMarker = \"__CSSVARSPONYFILL-KEYFRAMES__\";\n        for (var i = 0, len = allNodes.length; i < len; i++) {\n            var node = allNodes[i];\n            var animationName = getComputedStyle(node)[animationNameProp];\n            if (animationName !== \"none\") {\n                node.style[animationNameProp] += nameMarker;\n                keyframeNodes.push(node);\n            }\n        }\n        void document.body.offsetHeight;\n        for (var _i = 0, _len = keyframeNodes.length; _i < _len; _i++) {\n            var nodeStyle = keyframeNodes[_i].style;\n            nodeStyle[animationNameProp] = nodeStyle[animationNameProp].replace(nameMarker, \"\");\n        }\n    }\n}\n\nfunction getFullUrl$1(url) {\n    var base = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : location.href;\n    var d = document.implementation.createHTMLDocument(\"\");\n    var b = d.createElement(\"base\");\n    var a = d.createElement(\"a\");\n    d.head.appendChild(b);\n    d.body.appendChild(a);\n    b.href = base;\n    a.href = url;\n    return a.href;\n}\n\nfunction getTimeStamp() {\n    return isBrowser && (window.performance || {}).now ? window.performance.now() : new Date().getTime();\n}\n\nexport default cssVars;\n//# sourceMappingURL=css-vars-ponyfill.esm.js.map\n","/*\n * classList.js: Cross-browser full element.classList implementation.\n * 1.1.20170427\n *\n * By Eli Grey, http://eligrey.com\n * License: Dedicated to the public domain.\n *   See https://github.com/eligrey/classList.js/blob/master/LICENSE.md\n */\n\n/*global self, document, DOMException */\n\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */\n\nif (\"document\" in window.self) {\n\n// Full polyfill for browsers with no classList support\n// Including IE < Edge missing SVGElement.classList\nif (!(\"classList\" in document.createElement(\"_\")) \n\t|| document.createElementNS && !(\"classList\" in document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\"))) {\n\n(function (view) {\n\n\"use strict\";\n\nif (!('Element' in view)) return;\n\nvar\n\t  classListProp = \"classList\"\n\t, protoProp = \"prototype\"\n\t, elemCtrProto = view.Element[protoProp]\n\t, objCtr = Object\n\t, strTrim = String[protoProp].trim || function () {\n\t\treturn this.replace(/^\\s+|\\s+$/g, \"\");\n\t}\n\t, arrIndexOf = Array[protoProp].indexOf || function (item) {\n\t\tvar\n\t\t\t  i = 0\n\t\t\t, len = this.length\n\t\t;\n\t\tfor (; i < len; i++) {\n\t\t\tif (i in this && this[i] === item) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\t// Vendors: please allow content code to instantiate DOMExceptions\n\t, DOMEx = function (type, message) {\n\t\tthis.name = type;\n\t\tthis.code = DOMException[type];\n\t\tthis.message = message;\n\t}\n\t, checkTokenAndGetIndex = function (classList, token) {\n\t\tif (token === \"\") {\n\t\t\tthrow new DOMEx(\n\t\t\t\t  \"SYNTAX_ERR\"\n\t\t\t\t, \"An invalid or illegal string was specified\"\n\t\t\t);\n\t\t}\n\t\tif (/\\s/.test(token)) {\n\t\t\tthrow new DOMEx(\n\t\t\t\t  \"INVALID_CHARACTER_ERR\"\n\t\t\t\t, \"String contains an invalid character\"\n\t\t\t);\n\t\t}\n\t\treturn arrIndexOf.call(classList, token);\n\t}\n\t, ClassList = function (elem) {\n\t\tvar\n\t\t\t  trimmedClasses = strTrim.call(elem.getAttribute(\"class\") || \"\")\n\t\t\t, classes = trimmedClasses ? trimmedClasses.split(/\\s+/) : []\n\t\t\t, i = 0\n\t\t\t, len = classes.length\n\t\t;\n\t\tfor (; i < len; i++) {\n\t\t\tthis.push(classes[i]);\n\t\t}\n\t\tthis._updateClassName = function () {\n\t\t\telem.setAttribute(\"class\", this.toString());\n\t\t};\n\t}\n\t, classListProto = ClassList[protoProp] = []\n\t, classListGetter = function () {\n\t\treturn new ClassList(this);\n\t}\n;\n// Most DOMException implementations don't allow calling DOMException's toString()\n// on non-DOMExceptions. Error's toString() is sufficient here.\nDOMEx[protoProp] = Error[protoProp];\nclassListProto.item = function (i) {\n\treturn this[i] || null;\n};\nclassListProto.contains = function (token) {\n\ttoken += \"\";\n\treturn checkTokenAndGetIndex(this, token) !== -1;\n};\nclassListProto.add = function () {\n\tvar\n\t\t  tokens = arguments\n\t\t, i = 0\n\t\t, l = tokens.length\n\t\t, token\n\t\t, updated = false\n\t;\n\tdo {\n\t\ttoken = tokens[i] + \"\";\n\t\tif (checkTokenAndGetIndex(this, token) === -1) {\n\t\t\tthis.push(token);\n\t\t\tupdated = true;\n\t\t}\n\t}\n\twhile (++i < l);\n\n\tif (updated) {\n\t\tthis._updateClassName();\n\t}\n};\nclassListProto.remove = function () {\n\tvar\n\t\t  tokens = arguments\n\t\t, i = 0\n\t\t, l = tokens.length\n\t\t, token\n\t\t, updated = false\n\t\t, index\n\t;\n\tdo {\n\t\ttoken = tokens[i] + \"\";\n\t\tindex = checkTokenAndGetIndex(this, token);\n\t\twhile (index !== -1) {\n\t\t\tthis.splice(index, 1);\n\t\t\tupdated = true;\n\t\t\tindex = checkTokenAndGetIndex(this, token);\n\t\t}\n\t}\n\twhile (++i < l);\n\n\tif (updated) {\n\t\tthis._updateClassName();\n\t}\n};\nclassListProto.toggle = function (token, force) {\n\ttoken += \"\";\n\n\tvar\n\t\t  result = this.contains(token)\n\t\t, method = result ?\n\t\t\tforce !== true && \"remove\"\n\t\t:\n\t\t\tforce !== false && \"add\"\n\t;\n\n\tif (method) {\n\t\tthis[method](token);\n\t}\n\n\tif (force === true || force === false) {\n\t\treturn force;\n\t} else {\n\t\treturn !result;\n\t}\n};\nclassListProto.toString = function () {\n\treturn this.join(\" \");\n};\n\nif (objCtr.defineProperty) {\n\tvar classListPropDesc = {\n\t\t  get: classListGetter\n\t\t, enumerable: true\n\t\t, configurable: true\n\t};\n\ttry {\n\t\tobjCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n\t} catch (ex) { // IE 8 doesn't support enumerable:true\n\t\t// adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36\n\t\t// modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected\n\t\tif (ex.number === undefined || ex.number === -0x7FF5EC54) {\n\t\t\tclassListPropDesc.enumerable = false;\n\t\t\tobjCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n\t\t}\n\t}\n} else if (objCtr[protoProp].__defineGetter__) {\n\telemCtrProto.__defineGetter__(classListProp, classListGetter);\n}\n\n}(window.self));\n\n}\n\n// There is full or partial native classList support, so just check if we need\n// to normalize the add/remove and toggle APIs.\n\n(function () {\n\t\"use strict\";\n\n\tvar testElement = document.createElement(\"_\");\n\n\ttestElement.classList.add(\"c1\", \"c2\");\n\n\t// Polyfill for IE 10/11 and Firefox <26, where classList.add and\n\t// classList.remove exist but support only one argument at a time.\n\tif (!testElement.classList.contains(\"c2\")) {\n\t\tvar createMethod = function(method) {\n\t\t\tvar original = DOMTokenList.prototype[method];\n\n\t\t\tDOMTokenList.prototype[method] = function(token) {\n\t\t\t\tvar i, len = arguments.length;\n\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\ttoken = arguments[i];\n\t\t\t\t\toriginal.call(this, token);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t\tcreateMethod('add');\n\t\tcreateMethod('remove');\n\t}\n\n\ttestElement.classList.toggle(\"c3\", false);\n\n\t// Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n\t// support the second argument.\n\tif (testElement.classList.contains(\"c3\")) {\n\t\tvar _toggle = DOMTokenList.prototype.toggle;\n\n\t\tDOMTokenList.prototype.toggle = function(token, force) {\n\t\t\tif (1 in arguments && !this.contains(token) === !force) {\n\t\t\t\treturn force;\n\t\t\t} else {\n\t\t\t\treturn _toggle.call(this, token);\n\t\t\t}\n\t\t};\n\n\t}\n\n\ttestElement = null;\n}());\n\n}\n","/* eslint-disable */\n// Production steps of ECMA-262, Edition 6, 22.1.2.1\nif (!Array.from) {\n  Array.from = (function() {\n    var toStr = Object.prototype.toString;\n    var isCallable = function(fn) {\n      return typeof fn === 'function' || toStr.call(fn) === '[object Function]';\n    };\n    var toInteger = function(value) {\n      var number = Number(value);\n      if (isNaN(number)) {\n        return 0;\n      }\n      if (number === 0 || !isFinite(number)) {\n        return number;\n      }\n      return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n    };\n    var maxSafeInteger = Math.pow(2, 53) - 1;\n    var toLength = function(value) {\n      var len = toInteger(value);\n      return Math.min(Math.max(len, 0), maxSafeInteger);\n    };\n\n    // The length property of the from method is 1.\n    return function from(arrayLike /*, mapFn, thisArg */) {\n      // 1. Let C be the this value.\n      var C = this;\n\n      // 2. Let items be ToObject(arrayLike).\n      var items = Object(arrayLike);\n\n      // 3. ReturnIfAbrupt(items).\n      if (arrayLike == null) {\n        throw new TypeError(\n          'Array.from requires an array-like object - not null or undefined'\n        );\n      }\n\n      // 4. If mapfn is undefined, then let mapping be false.\n      var mapFn = arguments.length > 1 ? arguments[1] : void undefined;\n      var T;\n      if (typeof mapFn !== 'undefined') {\n        // 5. else\n        // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\n        if (!isCallable(mapFn)) {\n          throw new TypeError(\n            'Array.from: when provided, the second argument must be a function'\n          );\n        }\n\n        // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\n        if (arguments.length > 2) {\n          T = arguments[2];\n        }\n      }\n\n      // 10. Let lenValue be Get(items, \"length\").\n      // 11. Let len be ToLength(lenValue).\n      var len = toLength(items.length);\n\n      // 13. If IsConstructor(C) is true, then\n      // 13. a. Let A be the result of calling the [[Construct]] internal method\n      // of C with an argument list containing the single item len.\n      // 14. a. Else, Let A be ArrayCreate(len).\n      var A = isCallable(C) ? Object(new C(len)) : new Array(len);\n\n      // 16. Let k be 0.\n      var k = 0;\n      // 17. Repeat, while k < len… (also steps a - h)\n      var kValue;\n      while (k < len) {\n        kValue = items[k];\n        if (mapFn) {\n          A[k] =\n            typeof T === 'undefined'\n              ? mapFn(kValue, k)\n              : mapFn.call(T, kValue, k);\n        } else {\n          A[k] = kValue;\n        }\n        k += 1;\n      }\n      // 18. Let putStatus be Put(A, \"length\", len, true).\n      A.length = len;\n      // 20. Return A.\n      return A;\n    };\n  })();\n}\n","/* eslint-disable */\n// closest polyfill\n(function(ElementProto) {\n  if (typeof ElementProto.matches !== 'function') {\n    ElementProto.matches =\n      ElementProto.msMatchesSelector ||\n      ElementProto.mozMatchesSelector ||\n      ElementProto.webkitMatchesSelector ||\n      function matches(selector) {\n        var element = this;\n        var elements = (\n          element.document || element.ownerDocument\n        ).querySelectorAll(selector);\n        var index = 0;\n\n        while (elements[index] && elements[index] !== element) {\n          ++index;\n        }\n\n        return Boolean(elements[index]);\n      };\n  }\n\n  if (typeof ElementProto.closest !== 'function') {\n    ElementProto.closest = function closest(selector) {\n      var element = this;\n\n      while (element && element.nodeType === 1) {\n        if (element.matches(selector)) {\n          return element;\n        }\n\n        element = element.parentNode;\n      }\n\n      return null;\n    };\n  }\n})(window.Element.prototype);\n","/* eslint-disable no-extend-native */\n// falback for foreach\nif (!Array.prototype.forEach) {\n  Array.prototype.forEach = function(callback, thisArg) {\n    let T, k;\n\n    if (this === null) {\n      throw new TypeError(' this is null or not defined');\n    }\n\n    // 1. Let O be the result of calling ToObject passing the |this| value as the argument.\n    const O = Object(this);\n\n    // 2. Let lenValue be the result of calling the Get internal method of O with the argument \"length\".\n    // 3. Let len be ToUint32(lenValue).\n    const len = O.length >>> 0;\n\n    // 4. If IsCallable(callback) is false, throw a TypeError exception.\n    // See: http://es5.github.com/#x9.11\n    if (typeof callback !== 'function') {\n      throw new TypeError(`${callback} is not a function`);\n    }\n\n    // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.\n    if (arguments.length > 1) {\n      T = thisArg;\n    }\n\n    // 6. Let k be 0\n    k = 0;\n\n    // 7. Repeat, while k < len\n    while (k < len) {\n      let kValue;\n\n      // a. Let Pk be ToString(k).\n      //   This is implicit for LHS operands of the in operator\n      // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.\n      //   This step can be combined with c\n      // c. If kPresent is true, then\n      if (k in O) {\n        // i. Let kValue be the result of calling the Get internal method of O with argument Pk.\n        kValue = O[k];\n\n        // ii. Call the Call internal method of callback with T as the this value and\n        // argument list containing kValue, k, and O.\n        callback.call(T, kValue, k, O);\n      }\n      // d. Increase k by 1.\n      k++;\n    }\n    // 8. return undefined\n  };\n}\n","/* eslint-disable */\n\n// Array.prototype.map polyfill\n// code from https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map\nif (!Array.prototype.map) {\n  Array.prototype.map = function(fun /* , thisArg */) {\n    'use strict';\n\n    if (this === void 0 || this === null) {\n      throw new TypeError();\n    }\n\n    var t = Object(this);\n    var len = t.length >>> 0;\n\n    if (typeof fun !== 'function') {\n      throw new TypeError();\n    }\n\n    var res = new Array(len);\n    var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n\n    for (var i = 0; i < len; i++) {\n      // NOTE: Absolute correctness would demand Object.defineProperty\n      //       be used.  But this method is fairly new, and failure is\n      //       possible only if Object.prototype or Array.prototype\n      //       has a property |i| (very unlikely), so use a less-correct\n      //       but more portable alternative.\n      if (i in t) {\n        res[i] = fun.call(thisArg, t[i], i, t);\n      }\n    }\n\n    return res;\n  };\n}\n","/* eslint-disable */\nif (typeof Object.assign !== 'function') {\n  // Must be writable: true, enumerable: false, configurable: true\n  Object.defineProperty(Object, 'assign', {\n    value: function assign(target, varArgs) {\n      // .length of function is 2\n\n      if (target == null) {\n        // TypeError if undefined or null\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n\n      var to = Object(target);\n\n      for (var index = 1; index < arguments.length; index++) {\n        var nextSource = arguments[index];\n\n        if (nextSource != null) {\n          // Skip over if undefined or null\n          for (var nextKey in nextSource) {\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    },\n    writable: true,\n    configurable: true\n  });\n}\n","/* eslint-disable */\n\n(function() {\n  var lastTime = 0;\n  var vendors = ['webkit', 'moz'];\n\n  for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n    window.cancelAnimationFrame =\n      window[vendors[x] + 'CancelAnimationFrame'] ||\n      window[vendors[x] + 'CancelRequestAnimationFrame'];\n  }\n\n  if (!window.requestAnimationFrame) {\n    window.requestAnimationFrame = function(callback, element) {\n      var currTime = new Date().getTime();\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n      var id = window.setTimeout(function() {\n        callback(currTime + timeToCall);\n      }, timeToCall);\n\n      lastTime = currTime + timeToCall;\n      return id;\n    };\n  }\n\n  if (!window.cancelAnimationFrame) {\n    window.cancelAnimationFrame = function(id) {\n      window.clearTimeout(id);\n    };\n  }\n}());\n","/* eslint-disable */\n\n(function() {\n  if ('content' in document.createElement('template')) {\n    return false;\n  }\n\n  var templates = document.getElementsByTagName('template');\n  var plateLen = templates.length;\n\n  for (var x = 0; x < plateLen; ++x) {\n    var template = templates[x];\n    var content = template.childNodes;\n    var fragment = document.createDocumentFragment();\n\n    while (content[0]) {\n      fragment.appendChild(content[0]);\n    }\n\n    template.content = fragment;\n  }\n}());\n","// trunc polyfill\nMath.trunc =\n  Math.trunc ||\n  function(x) {\n    return x < 0 ? Math.ceil(x) : Math.floor(x);\n  };\n","// source: https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n(function() {\n  if (typeof window.CustomEvent === 'function') {\n    return false;\n  }\n\n  function CustomEvent(event, params) {\n    params = params || {bubbles: false, cancelable: false, detail: undefined};\n    var evt = document.createEvent('CustomEvent');\n\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n\n  CustomEvent.prototype = window.Event.prototype;\n\n  window.CustomEvent = CustomEvent;\n}());\n","export default {\n  'drilldown.close_menu': 'Sluit menu',\n  'drilldown.search': 'Zoek',\n  'drilldown.back_to_level': 'Terug naar niveau $1',\n  'drilldown.no_results': 'Geen resultaten gevonden',\n  'slider.next_slide': 'volgende slide',\n  'slider.prev_slide': 'vorige slide',\n  'lightbox.next_slide': 'Volgende (Pijltje naar rechts)',\n  'lightbox.prev_slide': 'Vorige (Pijltje naar links)',\n  'lightbox.zoom_in_out': 'Zoom in/uit',\n  'lightbox.close': 'Esc/sluiten',\n  'codepreview.copy': 'Copy',\n  'codepreview.copied': 'Copied',\n  'codepreview.copy_to_clipboard': 'Copy to clipboard',\n  'autocomplete.my_location': 'Mijn Locatie',\n  'autocomplete.loading_location': 'Locatie ophalen...',\n  'autocomplete.no_results': 'Geen resultaten',\n  'select.search_placeholder_value': 'Zoek item',\n  'select.placeholder_value': 'Selecteer item',\n  'select.no_results': 'Geen resultaten gevonden',\n  'select.no_more_options': 'Geen resterende opties gevonden',\n  'upload.add_files': 'Bijlage toevoegen',\n  'upload.add_files_subtitle': 'Sleep de bijlage naar hier om toe te voegen',\n  'upload.file_to_big': 'Het bestand mag maximaal $1 zijn.',\n  'upload.file-type_not_allowed': 'Dit bestandstype is niet toegestaan.',\n  'upload.to_many_files': 'Je kan maximaal $1 bestand(en) uploaden.',\n  'upload.response_error': 'Er liep iets fout bij het uploaden.',\n};\n","import nl from './translations/nl';\n\nclass Translation {\n  constructor() {\n    this.i18n = nl;\n  }\n\n  t(key, ...args) {\n    let trans = this.i18n[key];\n\n    if(trans) {\n      let i = 0;\n\n      for (let arg of args) {\n        i++;\n        trans = trans.replace('$' + i, arg.toString());\n      }\n    } else {\n      return key;\n    }\n    return trans;\n  }\n}\n\nexport default Translation;\n","window.vl = window.vl || {};\nvl.ns = vl.ns || 'vl-';\n\nimport '@govflanders/vl-ui-util/src/js/util';\n\n// importing feature-detection\nimport './feature-detection/js-detection';\nimport Promise from 'promise-polyfill';\nimport 'intersection-observer';\nimport cssVars from 'css-vars-ponyfill';\n\n// To add to window\nif (!window.Promise) {\n  window.Promise = Promise;\n}\n// importing polyfill\nimport 'classlist-polyfill';\nimport './polyfill/array-from';\nimport './polyfill/closest';\nimport './polyfill/foreach';\nimport './polyfill/map';\n// import './polyfill/matches'; // Needs to be looked at, not working\nimport './polyfill/object-assign';\nimport './polyfill/request-animation-frame';\nimport './polyfill/template';\nimport './polyfill/trunk';\nimport './polyfill/customevent';\n\ncssVars();\n\n// setup translation helper\nimport Translation from './i18n/i18n';\nvl.i18n = new Translation();\n"],"names":["window","vl","ns","debounce","func","wait","immediate","timeout","context","args","arguments","later","callNow","apply","clearTimeout","setTimeout","throttle","threshhold","scope","last","deferTimer","now","Number","Date","addClass","el","classes","classList","add","removeClass","remove","hasClass","contains","toggleClass","toggle","addClassFor","duration","parseTemplate","str","data","replace","match","parensMatch","triggerEvent","obj","evt","fireOnThis","evtObj","document","createEvent","initEvent","dispatchEvent","createEventObject","fireEvent","unique","array","filter","elem","pos","arr","indexOf","closest","value","to","Math","round","offset","rect","getBoundingClientRect","doc","ownerDocument","win","defaultView","parentWindow","docElem","documentElement","xOff","pageXOffset","test","navigator","userAgent","top","pageYOffset","clientTop","left","clientLeft","insertAfter","newElement","targetElement","parent","parentNode","lastchild","appendChild","insertBefore","nextSibling","removeElement","removeChild","isNumeric","number","isNaN","parseFloat","isFinite","wrap","wrapper","sibling","stripTags","html","tmp","createElement","innerHTML","textContent","innerText","uniqueId","idStrLen","idStr","floor","random","toString","getTime","length","uniqueName","substring","accurateNumber","p","pow","toFixed","limit","a","max","min","asArray","Array","isArray","countDecimals","numStr","pieces","split","scrollTo","callback","scrollTop","difference","perTick","randomIntFromInterval","each","fn","l","i","exists","nullAllowed","emptyAllowed","bytesToSize","bytes","addUnits","base","sizes","parseInt","log","getJson","url","xhr","XMLHttpRequest","open","responseType","onload","status","response","send","getParents","selector","parents","firstChar","charAt","substr","push","id","hasAttribute","tagName","toLowerCase","getParentsUntil","parentType","selectorType","Util","util","noJsClass","jSclass","_jsDetection","setTimeoutFunc","noop","bind","thisArg","handle","self","deferred","_state","_value","_deferreds","_handled","Promise","_immediateFn","cb","onFulfilled","onRejected","resolve","reject","promise","ret","e","newValue","TypeError","then","finale","doResolve","_unhandledRejectionFn","len","Handler","done","reason","ex","undefined","_proto","prototype","catch","prom","constructor","all","slice","call","remaining","res","val","race","values","setImmediate","err","console","warn","IntersectionObserverEntry","Object","defineProperty","get","intersectionRatio","entry","time","target","rootBounds","boundingClientRect","intersectionRect","getEmptyRect","isIntersecting","targetRect","targetArea","width","height","intersectionArea","IntersectionObserver","opt_options","options","Error","root","nodeType","_checkForIntersections","THROTTLE_TIMEOUT","_callback","_observationTargets","_queuedEntries","_rootMarginValues","_parseRootMargin","rootMargin","thresholds","_initThresholds","threshold","map","margin","unit","join","POLL_INTERVAL","USE_MUTATION_OBSERVER","observe","isTargetAlreadyObserved","some","item","element","_registerInstance","_monitorIntersections","unobserve","_unmonitorIntersections","_unregisterInstance","disconnect","takeRecords","records","opt_threshold","sort","t","opt_rootMargin","marginString","margins","parts","exec","_monitoringIntersections","_monitoringInterval","setInterval","addEvent","_domObserver","MutationObserver","attributes","childList","characterData","subtree","clearInterval","removeEvent","rootIsInDom","_rootIsInDom","rootRect","_getRootRect","forEach","rootContainsTarget","_rootContainsTarget","oldEntry","_computeTargetAndRootIntersection","newEntry","_hasCrossedThreshold","getComputedStyle","display","getParentNode","atRoot","parentRect","parentComputedStyle","body","overflow","computeRectIntersection","right","clientWidth","bottom","clientHeight","_expandRectByRootMargin","newRect","oldRatio","newRatio","containsDeep","performance","timer","node","event","opt_useCapture","addEventListener","attachEvent","removeEventListener","detatchEvent","rect1","rect2","child","host","getUrls","urls","settings","mimeType","onBeforeSend","Function","onSuccess","onError","onComplete","urlArray","urlQueue","x","isValidCss","cssText","isHTML","trim","urlIndex","responseText","returnVal","parser","setAttribute","href","String","isIElte9","Boolean","atob","isIElte9CORS","location","isSameProtocol","protocol","xdr","XDomainRequest","onprogress","ontimeout","onerror","concat","overrideMimeType","onreadystatechange","readyState","getCssData","regex","cssComments","cssImports","rootElement","include","exclude","useCSSOM","sourceNodes","querySelectorAll","matchesSelector","cssArray","handleComplete","isComplete","handleSuccess","cssIndex","sourceUrl","resolveImports","resolvedCssText","errorData","parseImportData","baseUrl","ignoreRules","importData","rules","rule","absoluteUrls","getFullUrl","absoluteRules","oldUrl","newUrl","callbackFn","__errorData","__errorRules","responseImportData","responseArray","importText","linkHref","getAttribute","linkRel","isLink","nodeName","isStyle","sheet","cssRules","d","implementation","createHTMLDocument","b","head","elm","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","createElementNS","view","classListProp","protoProp","elemCtrProto","Element","objCtr","strTrim","arrIndexOf","DOMEx","type","message","name","code","DOMException","checkTokenAndGetIndex","token","ClassList","trimmedClasses","_updateClassName","classListProto","classListGetter","tokens","updated","index","splice","force","result","method","classListPropDesc","enumerable","configurable","__defineGetter__","testElement","createMethod","original","DOMTokenList","_toggle","from","toStr","isCallable","toInteger","abs","maxSafeInteger","toLength","arrayLike","C","items","mapFn","T","A","k","kValue","ElementProto","elements","O","fun","assign","varArgs","nextSource","nextKey","hasOwnProperty","writable","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","currTime","timeToCall","templates","getElementsByTagName","plateLen","template","content","childNodes","fragment","createDocumentFragment","trunc","ceil","CustomEvent","params","bubbles","cancelable","detail","initCustomEvent","Event","Translation","i18n","nl","key","trans","arg","cssVars"],"mappings":"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"}