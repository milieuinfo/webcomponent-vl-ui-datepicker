{"version":3,"file":"select.js","sources":["../../src/js/select.js"],"sourcesContent":["// Select.js\n// Using choices.js\nimport Choices from 'choices.js';\n\n// Private vars\nconst sClass = `${vl.ns}select`,\n  sClassJs = `js-${sClass}`,\n  sSelectorAtt = `data-${vl.ns}select`,\n  sMultiSelectorAtt = `data-${vl.ns}multiselect`,\n  sInnerClass = `${sClass}__inner`,\n  sInputClass = `${vl.ns}input-field`,\n  sInputClonedClass = `${sInputClass}-cloned`,\n  sListClass = `${sClass}__list`,\n  sListItemsClass = `${sListClass}--multiple`,\n  sListSingleClass = `${sListClass}--single`,\n  sListDropdownClass = `${sListClass}--dropdown`,\n  sItemClass = `${sClass}__item`,\n  sItemSelectableClass = `${sItemClass}--selectable`,\n  sItemDisabledClass = `${sItemClass}--disabled`,\n  sItemChoiceClass = `${sItemClass}--choice`,\n  sPlaceholderClass = `${sClass}__placeholder`,\n  sGroupClass = `${sClass}__group`,\n  sHeadingClass = `${sClass}__heading`,\n  sButtonClass = `${sClass}__button`,\n  pillClass = `${vl.ns}pill`,\n  pillCloseClass = `${pillClass}__close`,\n  sDressedAtt = `${sSelectorAtt}-dressed`,\n  sMultiDressedAtt = `${sMultiSelectorAtt}-dressed`,\n  sSearchAtt = `${sSelectorAtt}-search`,\n  sdeletableAtt = `${sSelectorAtt}-deletable`,\n  sSearchEmptyAtt = `${sSelectorAtt}-search-empty-text`;\n\nconst _prepareChoisesConfig = element => {\n  let obj = {},\n    searchEnabled = true,\n    removeItemButton = false,\n    searchPlaceholderValue = vl.i18n.t('select.search_placeholder_value'),\n    placeholderValue = vl.i18n.t('select.placeholder_value'),\n    disabled = false;\n\n  // Select has search - default behavior\n  if (element.hasAttribute(sSearchAtt)) {\n    searchEnabled = element.getAttribute(sSearchAtt) === 'true';\n  }\n\n  // Select is disabled\n  disabled = element.disabled;\n\n  // Select has empty-search-text attribute\n  if (element.hasAttribute(sSearchEmptyAtt)) {\n    obj.noResultsText = element.getAttribute(sSearchEmptyAtt);\n  }\n\n  if (element.hasAttribute(sMultiSelectorAtt) || element.hasAttribute(sdeletableAtt)) {\n    removeItemButton = true;\n  }\n\n  obj.searchEnabled = searchEnabled;\n  obj.removeItemButton = removeItemButton;\n  obj.searchPlaceholderValue = searchPlaceholderValue;\n  obj.placeholderValue = placeholderValue;\n  obj.disabled = disabled;\n\n  return obj;\n};\n\nclass Select {\n  constructor() {\n    this.selectInstances = [];\n    this.globalConfig = {\n      removeItemButton: false,\n      searchEnabled: true,\n      addItems: true,\n      classNames: {\n        containerOuter: sClassJs,\n        containerInner: sInnerClass,\n        input: sInputClass,\n        inputCloned: sInputClonedClass,\n        list: sListClass,\n        listItems: sListItemsClass,\n        listSingle: sListSingleClass,\n        listDropdown: sListDropdownClass,\n        item: sItemClass,\n        itemSelectable: sItemSelectableClass,\n        itemDisabled: sItemDisabledClass,\n        itemChoice: sItemChoiceClass,\n        placeholder: sPlaceholderClass,\n        group: sGroupClass,\n        groupHeading: sHeadingClass,\n        button: sButtonClass\n      },\n      noResultsText: vl.i18n.t('select.no_results'),\n      noChoicesText: vl.i18n.t('select.no_more_options'),\n      callbackOnCreateTemplates: this._createTemplates\n    };\n  }\n\n  _createTemplates(template) {\n    const classNames = this.config.classNames;\n\n    return {\n      itemList: () => {\n        if (this.passedElement.type === 'select-one') {\n          return template(`\n            <div class=\"${classNames.input}\"></div>\n          `);\n        }\n\n        return template(`\n          <div class=\"${classNames.input} ${classNames.listItems}\"></div>`);\n      },\n      item: data => {\n        // Still issue with placeholder on select with optGroups\n        // https://github.com/jshjohnson/Choices/issues/224\n        if (this.config.removeItemButton) {\n          return template(`\n              <div class=\"${classNames.item}\n                ${data.highlighted ? classNames.highlightedState : ''}\n                ${data.disabled ? '' : classNames.itemSelectable}\n                ${this.passedElement.type === 'select-one' ? '' : pillClass}\n                ${data.placeholder ? classNames.placeholder : ''}\"\n                data-item data-id=\"${data.id}\"\n                data-value=\"${data.value}\"\n                ${data.active ? 'aria-selected=\"true\"' : ''}\n                ${data.disabled ? 'aria-disabled=\"true\"' : 'data-deletable'}>\n                <span>${data.label}</span>\n                <button class=\"${pillCloseClass}\" data-button>\n                  <span class=\"vl-u-visually-hidden\">Remove item</span>\n                </button>\n              </div>\n            `);\n        }\n\n        return template(`\n          <div class=\"${classNames.item}\n            ${data.highlighted ?\n    classNames.highlightedState :\n    classNames.itemSelectable}\n            ${data.placeholder ? classNames.placeholder : ''}\"\n            data-item data-id=\"${data.id}\"\n            data-value=\"${data.value}\"\n            ${data.active ? 'aria-selected=\"true\"' : ''}\n            ${data.disabled ? 'aria-disabled=\"true\"' : ''}>\n            ${data.label}\n          </div>\n          `);\n      },\n      input: () => {\n        return template(`\n          <input type=\"text\" class=\"${classNames.input}\n            ${classNames.inputCloned}\"\n            autocomplete=\"off\"\n            autocapitalize=\"off\"\n            spellcheck=\"false\"\n            role=\"textbox\"\n            aria-autocomplete=\"list\">\n          `);\n      }\n    };\n  }\n\n  _buildSelect(select, config, params, originalOptions) {\n    let choice = new Choices(select, config),\n      items = [];\n\n    if (vl.util.exists(params.callbackFn)) {\n      items = params.callbackFn(select);\n\n      this._callback(choice, items);\n    }\n\n    if (config.disabled) {\n      choice.disable();\n    }\n\n    choice.originalOptions = originalOptions;\n\n    this.selectInstances.push(choice);\n  }\n\n  _callback(choice, items) {\n    choice.setChoices(items, 'value', 'label', false);\n  }\n\n  removeActive(select) {\n    vl.util.each(this.selectInstances, instance => {\n      if (instance.element === select) {\n        // Again here is an issue with the placeholder\n        // The entire select would be cleared and no placeholder would be set,\n\n        // Should be:\n        // instance.removeActiveItems();\n\n        // Dirty-ish fix, trigger click on working button\n        const closeButton = instance.containerOuter.querySelector(`.${pillCloseClass}`);\n\n        if (vl.util.exists(closeButton)) {\n          vl.util.triggerEvent(closeButton, 'click');\n        } else {\n          instance.removeActiveItems();\n        }\n      }\n    });\n  }\n\n  disable(select) {\n    vl.util.each(this.selectInstances, instance => {\n      if (instance.element === select) {\n        instance.disable();\n      }\n    });\n  }\n\n  enable(select) {\n    vl.util.each(this.selectInstances, instance => {\n      if (instance.element === select) {\n        instance.enable();\n      }\n    });\n  }\n\n  setValueByChoice(select, value) {\n    vl.util.each(this.selectInstances, instance => {\n      if (instance.element === select) {\n        instance.setValueByChoice(value);\n      }\n    });\n  }\n\n  dress(select, params = {}) {\n    let config = {},\n      originalOptions = select.querySelectorAll('option');\n\n    select.setAttribute(sDressedAtt, true);\n\n    // Build select config\n    config = _prepareChoisesConfig(select);\n    config = Object.assign(this.globalConfig, config);\n\n    this._buildSelect(select, config, params, originalOptions);\n  }\n\n  undress(selectInstance) {\n    let selectId = selectInstance.element.id,\n      selectEl;\n\n    selectInstance.element.removeAttribute(sDressedAtt);\n    selectInstance.element.removeAttribute(sMultiDressedAtt);\n\n    // Destroy is not working correctly, initial state will not be correctly reset\n    // https://github.com/jshjohnson/Choices/issues/298\n    selectInstance.destroy();\n\n    selectEl = document.getElementById(selectId);\n\n    vl.util.each(selectInstance.originalOptions, option => {\n      selectEl.appendChild(option);\n    });\n\n    // Reset select to first value\n    selectEl.selectedIndex = 0;\n  }\n\n  dressAll() {\n    const selectFields = document.querySelectorAll(\n        `[${sSelectorAtt}]:not([${sDressedAtt}]):not([data-${vl.ns}js-dress=\"false\"])`\n      ),\n      multiSelectFields = document.querySelectorAll(\n        `[${sMultiSelectorAtt}]:not([${sMultiDressedAtt}]):not([data-${vl.ns}js-dress=\"false\"])`\n      );\n\n    vl.util.each(selectFields, select => {\n      this.dress(select);\n    });\n\n    vl.util.each(multiSelectFields, multiSelect => {\n      this.dress(multiSelect);\n    });\n  }\n\n  undressAll() {\n    if (vl.util.exists(this.selectInstances)) {\n      vl.util.each(this.selectInstances, selectInstance => {\n        this.undress(selectInstance);\n      });\n    }\n\n    this.selectInstances = [];\n  }\n}\n\nif(!('select' in vl)) {\n  vl.select = new Select();\n  vl.select.dressAll();\n}\n\nexport default Select;\n"],"names":["sClass","vl","ns","sClassJs","sSelectorAtt","sMultiSelectorAtt","sInnerClass","sInputClass","sInputClonedClass","sListClass","sListItemsClass","sListSingleClass","sListDropdownClass","sItemClass","sItemSelectableClass","sItemDisabledClass","sItemChoiceClass","sPlaceholderClass","sGroupClass","sHeadingClass","sButtonClass","pillClass","pillCloseClass","sDressedAtt","sMultiDressedAtt","sSearchAtt","sdeletableAtt","sSearchEmptyAtt","_prepareChoisesConfig","element","obj","searchEnabled","removeItemButton","searchPlaceholderValue","i18n","t","placeholderValue","disabled","hasAttribute","getAttribute","noResultsText","Select","selectInstances","globalConfig","addItems","classNames","containerOuter","containerInner","input","inputCloned","list","listItems","listSingle","listDropdown","item","itemSelectable","itemDisabled","itemChoice","placeholder","group","groupHeading","button","noChoicesText","callbackOnCreateTemplates","_createTemplates","template","config","itemList","passedElement","type","data","highlighted","highlightedState","id","value","active","label","select","params","originalOptions","choice","Choices","items","util","exists","callbackFn","_callback","disable","push","setChoices","each","instance","closeButton","querySelector","triggerEvent","removeActiveItems","enable","setValueByChoice","querySelectorAll","setAttribute","Object","assign","_buildSelect","selectInstance","selectId","selectEl","removeAttribute","destroy","document","getElementById","option","appendChild","selectedIndex","selectFields","multiSelectFields","dress","multiSelect","undress","dressAll"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}